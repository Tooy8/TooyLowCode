var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))__hasOwnProp.call(t,r)&&__defNormalProp(e,r,t[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(t))__propIsEnum.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t));!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("element-ui")):"function"==typeof define&&define.amd?define(["element-ui"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).ElementVerify=t(e.ElementUI)}(this,(function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=t(e);const n=e=>/^-?\d*\.?\d+$/.test(e);var s=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",wphone:(e,{canBeEmpty:t})=>({trigger:"blur",validator:(e,r,s)=>t&&!r?s():11!==r.toString().length?s(new Error("手机号应该为11位数字")):n(r)?/^1[0-9]{10}$/.test(r)?s():s(new Error("请输入正确的手机号")):s(new Error("手机号应该为11位数字"))}),phone:(e,{canBeEmpty:t})=>({trigger:"blur",validator:(e,r,s)=>t&&!r?s():11!==r.toString().length?s(new Error("手机号应该为11位数字")):n(r)?/^1[3-9]\d{9}$/.test(r)?s():s(new Error("请输入正确的手机号")):s(new Error("手机号应该为11位数字"))}),sphone:(e,{canBeEmpty:t})=>({trigger:"blur",validator:(e,r,s)=>t&&!r?s():11!==r.toString().length?s(new Error("手机号应该为11位数字")):n(r)?/^1(3([0-35-9]\d|4[1-8])|4[14-9]\d|5([0-35689]\d|7[1-79])|66\d|7[2-35-8]\d|8\d{2}|9[13589]\d)\d{7}$/.test(r)?s():s(new Error("请输入正确的手机号")):s(new Error("手机号应该为11位数字"))}),telphone:(e,{canBeEmpty:t})=>({trigger:"blur",validator:(e,r,n)=>t&&!r?n():r.startsWith("0")?r.includes("-")?/^(?:(?:\d{3}-)?\d{8}|^(?:\d{4}-)?\d{7,8})(?:-\d+)?$/.test(r)?n():n(new Error("请输入正确的座机号码")):n(new Error("地区码与号码之间需要使用-符号连接")):n(new Error("国内座机号码是以数字0开头"))}),email:()=>({type:"email",trigger:"blur",message:"请输入正确的邮箱号"}),semail:(e,{canBeEmpty:t})=>({trigger:"blur",validator:(r,n,s)=>{if(t&&!n)return s();if(!Array.isArray(e))return void console.error("semail的参数应该是数组，该条校验失效被忽略");if(!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n))return s(new Error("请输入正确的邮箱号"));return e.some((e=>n.includes(e)))?s():s(new Error(`只允许输入${e}等域名的邮箱`))}}),url:()=>({type:"url",trigger:"blur",message:"请输入正确的url"}),surl:(e,{canBeEmpty:t})=>({trigger:"blur",validator:(r,n,s)=>t&&!n?s():/^(?:\w+:)?\/\/([^\s.]+\.\S{2}|localhost[:?\d]*)\S*$/.test(n)?n.startsWith(e)?s(new Error(`请输入以${e}开头的url`)):s():s(new Error("请输入正确的url"))}),idCard:(e,{canBeEmpty:t})=>({trigger:"blur",validator:(e,r,n)=>{const s=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],o={0:"1",1:"0",2:"X",3:"9",4:"8",5:"7",6:"6",7:"5",8:"4",9:"3",10:"2"};if(t&&!r)return n();if(!/(^\d{8}(0\d|10|11|12)([0-2]\d|30|31)\d{3}$)|(^\d{6}(18|19|20)\d{2}(0[1-9]|10|11|12)([0-2]\d|30|31)\d{3}(\d|X|x)$)/.test(r))return n(new Error("请输入正确的身份证号"));if(18===r.length){let e=0,t=r.split("");t.forEach(((t,r)=>{17!==r&&(e+=parseInt(t)*s[r])}));let a=o[e%11];if(t[t.length-1].toUpperCase()!==a)return n(new Error("请输入正确的身份证号"))}return n()}}),passwordOptions:(e,{canBeEmpty:t})=>({trigger:"blur",validator:(r,n,s)=>{const o={"大写字母":"A-Z","小写字母":"a-z","字母":"A-Za-z","数字":"0-9","中文":"一-龥","特殊字符":"/./,/!/#/$/%/^/&/*/@/_/+/(/)/-/?",".":"/.",",":"/,","!":"/!","#":"/#",$:"/$","%":"/%","^":"/^","&":"/&","*":"/*","@":"/@",_:"/_","+":"/+","(":"/(",")":"/)","-":"/-","?":"/?"};if(t&&!n)return s();const[a,l,i,c]=e;if(a>n.toString().length||n.toString().length>l)return s(new Error(`密码长度应为${a}-${l}位`));if(!i||""===i)return void console.error("passwordOptions:可选类型参数是必填选项，该条校验规则失效已忽略");const u=i.split("|").map((e=>o[e])).join("");if(!new RegExp(`^[${u}]+$`).test(n))return s(new Error(`密码只能包含${i.replace(/\|/g,"、")}类型字符`));if(!c||""===c)return s();const p=c.split("|").map((e=>`([${o[e]}])+`)).join("");return new RegExp(`${p}`).test(n)?s():s(new Error(`密码必须包含${c.replace(/\|/g,"、")}类型字符`))}}),regexp:(e,{canBeEmpty:t})=>({trigger:"blur",validator:(r,n,s)=>{if(!Array.isArray(e))return void console.error('regexp校验的参数是含两个变量的数组 - ["正则字面量", "错误提示"]，此条校验无效被忽略');const[o,a]=e;if("[object RegExp]"===Object.prototype.toString.call(o))return t&&!n?s():o.test(n)?void s():s(new Error(a||"输入不符合要求"));console.error('regexp校验的参数是含两个变量的数组 - ["正则字面量", "错误提示"]，此条校验无效被忽略')}})});const o=e=>/^-?\d*\.?\d+$/.test(e);var a=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",eq:(e,{canBeEmpty:t})=>({trigger:"blur",validator:(r,n,s)=>"[object Number]"!==Object.prototype.toString.call(e)?(console.error(`eq校验的参数只能是number类型，当前类型： ${Object.prototype.toString.call(e)}`),s()):t&&!n?s():o(n)?parseFloat(n)!==parseFloat(e)?s(new Error(`输入内容应等于${e}`)):void s():s(new Error("请输入数字字符"))}),gt:(e,{canBeEmpty:t})=>({trigger:"blur",validator:(r,n,s)=>"[object Number]"!==Object.prototype.toString.call(e)?(console.error(`gt校验的参数只能是number类型，当前类型： ${Object.prototype.toString.call(e)}`),s()):t&&!n?s():o(n)?parseFloat(n)<=parseFloat(e)?s(new Error(`输入内容应大于${e}`)):void s():s(new Error("请输入数字字符"))}),gte:(e,{canBeEmpty:t})=>({trigger:"blur",validator:(r,n,s)=>"[object Number]"!==Object.prototype.toString.call(e)?(console.error(`gt校验的参数只能是number类型，当前类型： ${Object.prototype.toString.call(e)}`),s()):t&&!n?s():o(n)?parseFloat(n)<parseFloat(e)?s(new Error(`输入内容应大于等于${e}`)):void s():s(new Error("请输入数字字符"))}),lt:(e,{canBeEmpty:t})=>({trigger:"blur",validator:(r,n,s)=>"[object Number]"!==Object.prototype.toString.call(e)?(console.error(`gt校验的参数只能是number类型，当前类型： ${Object.prototype.toString.call(e)}`),s()):t&&!n?s():o(n)?parseFloat(n)>=parseFloat(e)?s(new Error(`输入内容应小于${e}`)):void s():s(new Error("请输入数字字符"))}),lte:(e,{canBeEmpty:t})=>({trigger:"blur",validator:(r,n,s)=>"[object Number]"!==Object.prototype.toString.call(e)?(console.error(`gt校验的参数只能是number类型，当前类型： ${Object.prototype.toString.call(e)}`),s()):t&&!n?s():o(n)?parseFloat(n)>parseFloat(e)?s(new Error(`输入内容应小于等于${e}`)):void s():s(new Error("请输入数字字符"))})});var l=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",length:e=>({type:"string",trigger:"blur",min:parseInt(e),max:parseInt(e),message:`输入内容应为${e}个字符`}),minLen:e=>({type:"string",trigger:"blur",min:parseInt(e),message:`输入内容应大于${e}个字符`}),maxLen:e=>({type:"string",trigger:"blur",max:parseInt(e),message:`输入内容应小于${e}个字符`})});const i={"数字":{message:"请输入整数或者小数!",check:e=>/^-?\d*\.?\d+$/.test(e)},"正数":{message:"请输入整数!",check:e=>/^-?[0-9]\d*$/.test(e)},intr0:{message:"请输入整数!",check:e=>/^-?[1-9]\d*$/.test(e)},"正整数":{message:"请输入正整数!",check:e=>/^[1-9]\d*$/.test(e)},pintw0:{message:"请输入0或正整数!",check:e=>/^[0-9]\d*$/.test(e)},"负整数":{message:"请输入负整数!",check:e=>/^-[1-9]\d*$/.test(e)},nintw0:{message:"请输入0或负整数!",check:e=>/^(0|-[0-9]\d*)$/.test(e)},"小数":{message:"请输入小数!",check:e=>/^-?([0-9]\d*)\.(\d+)$/.test(e)},floatw0:{message:"请输入小数!",check:e=>/^-?(0|([0-9]\d*\.\d+))$/.test(e)},"正小数":{message:"请输入小数!",check:e=>/^([0-9]\d*)\.(\d+)$/.test(e)},pfloatw0:{message:"请输入小数!",check:e=>/^(0|([0-9]\d*\.\d+))$/.test(e)},"负小数":{message:"请输入小数!",check:e=>/^-([0-9]\d*)\.(\d+)$/.test(e)},nfloatw0:{message:"请输入小数!",check:e=>/^(0|(-[0-9]\d*\.\d+))$/.test(e)},"字母":{message:"请输入英文字符!",check:e=>/^[a-zA-Z]+$/.test(e)},"小写字母":{message:"请输入小写英文字符!",check:e=>/^[a-z]+$/.test(e)},"大写字母":{message:"请输入大写英文字符!",check:e=>/^[A-Z]+$/.test(e)},"中文":{message:"请输入中文字符!",check:e=>/^[\u4e00-\u9fa5]+$/.test(e)},"特殊字符":{message:"请输入[.,!#$%^&*@_+-?]等特殊字符!",check:e=>/^[.,!#$%^&*@_+-/?]+$/.test(e)}};const c={"./modules/common.js":s,"./modules/number.js":a,"./modules/text.js":l,"./modules/type.js":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",type:(e,{canBeEmpty:t})=>({trigger:"blur",validator:(r,n,s)=>{if(t&&!n)return s();const o=i[e];return o.check(n)?s():s(new Error(o.message))}}),typeOptions:(e,{canBeEmpty:t})=>({trigger:"blur",validator:(r,n,s)=>{const o={"大写字母":"A-Z","小写字母":"a-z","字母":"A-Za-z","数字":"0-9","中文":"一-龥","特殊字符":"/./,/!/#/$/%/^/&/*/@/_/+/(/)/-/?",".":"/.",",":"/,","!":"/!","#":"/#",$:"/$","%":"/%","^":"/^","&":"/&","*":"/*","@":"/@",_:"/_","+":"/+","(":"/(",")":"/)","-":"/-","?":"/?"};if(t&&!n)return s();const[a,l]=e;if(!a||""===a)return void console.error("typeOptions:可选类型参数是必填选项，该条校验规则失效已忽略");const i=a.split("|").map((e=>o[e])).join("");if(!new RegExp(`^[${i}]+$`).test(n))return s(new Error(`只允许输入${a.replace(/\|/g,"、")}类型字符`));if(!l||""===l)return s();const c=l.split("|").map((e=>`([${o[e]}])+`)).join("");return new RegExp(`${c}`).test(n)?s():s(new Error(`必须包含${l.replace(/\|/g,"、")}字符`))}})}),"./modules/verify.js":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",verify:(e,{errorAlias:t})=>({required:!0,trigger:["blur","change"],message:t||"必填项"}),canBeEmpty:()=>({required:!1,trigger:"blur"})})};let u={};for(const j in c){const e=c[j];u=__spreadValues(__spreadValues({},u),e)}var p=u;const d=e=>""===e||!0===e||(e=>"[object Object]"===Object.prototype.toString.call(e))(e);class g{constructor(e){this.__initChain(e),this.__setProcess()}__initChain(e){this.onlyRequiredHandler=new h(e),this.canBeEmptyHandler=new v(e),this.complexHandler=new b(e)}__setProcess(){this.onlyRequiredHandler.setNextHandler(this.canBeEmptyHandler),this.canBeEmptyHandler.setNextHandler(this.complexHandler)}handle(e){this.onlyRequiredHandler.handle(e)}}class m{constructor(e){this.nextHandler=null,this.callObj=e}setNextHandler(e){this.nextHandler=e}}class h extends m{constructor(e){super(e)}handle(e){""===e.verify||!0===e.verify?this.callObj.addRule("verify"):this.nextHandler&&this.nextHandler.handle(...arguments)}}class v extends m{constructor(e){super(e)}handle(e){d(e.canBeEmpty)?this.callObj.addRule("canBeEmpty"):this.callObj.addRule("verify"),this.nextHandler&&this.nextHandler.handle(...arguments)}}class b extends m{constructor(e){super(e)}handle(e){Object.getOwnPropertyNames(e.verify).map((t=>{this.callObj.addRule(t,e.verify[t],{canBeEmpty:d(e.canBeEmpty)})})),this.nextHandler&&this.nextHandler.handle(...arguments)}}class E{constructor(e){Object.keys(e.rules).map((t=>this[t]=e.rules[t]))}getRules(){return Object.values(this)}}class f{constructor(e,t){this.rules={},this.vueProps=e,this.globalOptions=t,this.rulesTemplate=this.__getRulesTemplate()}__getRulesTemplate(){const e=this.globalOptions.customRules;return e?"[object Object]"!==Object.prototype.toString.call(e)?(console.warn("form-verify全局自定义规则字段customRules只能是一个object, 自定义规则失效"),p):__spreadValues(__spreadValues({},p),e):p}addRule(e,t,r){if(!this.rulesTemplate[e])return console.log(`校验器中无此验证选项：${e}，请检查，该条校验被忽略!`),this;const n=__spreadProps(__spreadValues({},r),{errorAlias:this.globalOptions.errorAlias});return Object.prototype.hasOwnProperty.call(this.rulesTemplate,e)?this.rules[e]=this.rulesTemplate[e](t,n):console.log(`校验器中无此验证选项：${e}，请检查!`),this}build(){return new g(this).handle(this.vueProps),new E(this)}}const y={verify:{type:Boolean|Object,default:!1},canBeEmpty:{type:Boolean|String,default:void 0},watch:{type:String,default:void 0},trigger:{type:String,default:void 0}},w=e=>({props:__spreadValues({},JSON.parse(JSON.stringify(y))),mounted(){this.watch&&this.elForm.$watch(`model.${this.watch}`,(()=>{this.elForm.validateField(this.prop)})),this.trigger&&this.elForm.$watch(`model.${this.prop}`,(()=>{this.elForm.validateField(this.trigger)}))},methods:{getRules(){return d(this.verify)?this.getMergeRules():this.getFrameWorkRules()},getMergeRules(){const t=new f(this._props,e).build().getRules()||[];return[...this.getFrameWorkRules(),...t]},getFrameWorkRules(){let e=this.form.rules;const t=this.rules,r=void 0!==this.required?{required:!!this.required}:[];return e=e?e[this.prop]:[],[].concat(t||e||[]).concat(r)}}});var _=function(e,t){const n=e.extend(r.default.FormItem);if(!n)throw Error("please install element first, https://element.eleme.cn/#/");n.mixin(w(t))},$=[{name:"regex",callback:{update:(e,t)=>{const r=t.value;if("[object RegExp]"!==Object.prototype.toString.call(r))return void console.warn(`v-regex指令参数只支持字面量正则，当前绑定参数：${t.value}，绑定无效`);const n=e.getElementsByTagName("input")[0];let s=!1;n.addEventListener("compositionstart",(function(){s=!0})),n.addEventListener("compositionend",(function(){s=!1,this.value=this.value.replace(r,"")})),n.addEventListener("input",(function(){s||(this.value=this.value.replace(r,""))})),n.addEventListener("blur",(function(){n.dispatchEvent(new Event("change")),n.dispatchEvent(new Event("input"))}))}}},{name:"length",callback:{update:(e,t)=>{const r=parseInt(t.value);if(isNaN(r))return void console.warn(`v-length指令参数只能是正整数，当前绑定参数：${t.value}，绑定无效`);const n=e.getElementsByTagName("input")[0];let s=!1;n.addEventListener("compositionstart",(function(){s=!0})),n.addEventListener("compositionend",(function(){s=!1,this.value.length>r&&(this.value=this.value.slice(0,r))})),n.oninput=function(){s||this.value.length<=r||(this.value=this.value.slice(0,r))},n.addEventListener("blur",(function(){n.dispatchEvent(new Event("change")),n.dispatchEvent(new Event("input"))}))}}},{name:"precision",callback:{bind:(e,t)=>{const r=parseInt(t.value);if(isNaN(r))return void console.warn(`v-precision指令参数只能是正整数，当前绑定参数：${t.value}，绑定无效`);const n=e.getElementsByTagName("input")[0];n.addEventListener("blur",(function(){const e=parseFloat(this.value.trim());isNaN(e)?console.warn(`v-precision指令只能检测数字类型string | number, 当前参数内容：${e}，请对输入内容进行限制`):(this.value=parseFloat(e.toFixed(r)),n.dispatchEvent(new Event("change")),n.dispatchEvent(new Event("input")))}))}}},{name:"max",callback:{bind:(e,t)=>{const r=parseInt(t.value);if(isNaN(r))return void console.warn(`v-max指令参数只能是正整数，当前绑定参数：${t.value}，绑定无效`);const n=e.getElementsByTagName("input")[0];n.addEventListener("blur",(function(){const e=parseFloat(this.value.trim());isNaN(e)?console.warn(`v-max指令只能检测数字类型string | number, 当前参数内容：${e}，请对输入内容进行限制`):e>r&&(this.value=r,n.dispatchEvent(new Event("change")),n.dispatchEvent(new Event("input")))}))}}},{name:"min",callback:{bind:(e,t)=>{const r=parseInt(t.value);if(isNaN(r))return void console.warn(`v-min指令参数只能是正整数，当前绑定参数：${t.value}，绑定无效`);const n=e.getElementsByTagName("input")[0];n.addEventListener("blur",(function(){const e=parseFloat(this.value.trim());isNaN(e)?console.warn(`v-min指令只能检测数字类型string | number, 当前参数内容：${e}，请对输入内容进行限制`):e<r&&(this.value=r,n.dispatchEvent(new Event("change")),n.dispatchEvent(new Event("input")))}))}}},{name:"number",callback:{bind:(e,t)=>{const{arg:r,value:n}=t,s=e.getElementsByTagName("input")[0];s.addEventListener("blur",(function(){const e={precision:(e,r)=>(r=parseFloat(r),isNaN(r)?(console.warn(`v-number:precision指令参数只能是正整数，当前绑定参数：${t.value}，绑定无效`),e):parseFloat(e.toFixed(r))),max:(e,r)=>(r=parseFloat(r),isNaN(r)?(console.warn(`v-number:max指令参数只能是正整数，当前绑定参数：${t.value}，绑定无效`),e):e>r?r:e),min:(e,r)=>(r=parseFloat(r),isNaN(r)?(console.warn(`v-number:min指令参数只能是正整数，当前绑定参数：${t.value}，绑定无效`),e):e<r?r:e)};let o=parseFloat(this.value.trim());if(""===o||isNaN(o))return console.warn(`v-number指令只能检测数字类型string | number, 当前内容：${this.value}`),this.value=null,s.dispatchEvent(new Event("change")),void s.dispatchEvent(new Event("input"));Object.prototype.hasOwnProperty.call(e,r)&&(o=e[r](o,n)),this.value=o,s.dispatchEvent(new Event("change")),s.dispatchEvent(new Event("input"))}))}}}];var O={install:function(e){$.map((t=>{e.directive(t.name,t.callback)}))}};return function(e,t){O.install(e,t),_(e,t||{})}}));
