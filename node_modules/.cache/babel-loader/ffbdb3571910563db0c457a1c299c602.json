{"remainingRequest":"D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\node_modules\\babel-loader\\lib\\index.js!D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\src\\custom-schema-template\\components\\SchemaArray\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\src\\custom-schema-template\\components\\SchemaArray\\index.vue","mtime":1693619752168},{"path":"D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693619820390},{"path":"D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\node_modules\\babel-loader\\lib\\index.js","mtime":1693619820336},{"path":"D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693619820390},{"path":"D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\node_modules\\vue-loader\\lib\\index.js","mtime":1693619864566}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBzY2hlbWFNaXhpbiBmcm9tICJAL21peGluL3NjaGVtYU1peGluIjsKaW1wb3J0IHR5cGVUb0NvbXBvbmVudCBmcm9tICJAL2NvbmZpZy9zY2hlbWEtdGVtcGxhdGUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlNjaGVtYUFycmF5IiwKICBtaXhpbnM6IFtzY2hlbWFNaXhpbl0sCiAgcHJvcHM6IHsKICAgIGxhYmVsOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIiIKICAgIH0sCiAgICBlZGl0OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgc2NoZW1hOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7fQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHR5cGVUb0NvbXBvbmVudDogdHlwZVRvQ29tcG9uZW50CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgYWRkSXRlbTogZnVuY3Rpb24gYWRkSXRlbSgpIHsKICAgICAgdmFyIF90aGlzJG1PcHRpb25zOwoKICAgICAgY29uc29sZS5sb2coIi4uLiIpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLm1WYWx1ZSk7CgogICAgICBpZiAodGhpcy5tVmFsdWUubGVuZ3RoID49ICgoX3RoaXMkbU9wdGlvbnMgPSB0aGlzLm1PcHRpb25zKSA9PT0gbnVsbCB8fCBfdGhpcyRtT3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbU9wdGlvbnMubGltaXQpKSB7CiAgICAgICAgdmFyIF90aGlzJG1PcHRpb25zMjsKCiAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgIHRpdGxlOiAi5peg5rOV5paw5aKeIiwKICAgICAgICAgIG1lc3NhZ2U6ICJcdTY3MDBcdTU5MUFcdTUzRUFcdTgwRkRcdTZERkJcdTUyQTAiLmNvbmNhdCgoX3RoaXMkbU9wdGlvbnMyID0gdGhpcy5tT3B0aW9ucykgPT09IG51bGwgfHwgX3RoaXMkbU9wdGlvbnMyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtT3B0aW9uczIubGltaXQsICJcdTY3NjFcdTY1NzBcdTYzNkUiKSwKICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIgogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5tVmFsdWUucHVzaCh7CiAgICAgICAgaWQ6IHRoaXMuJGdldFJhbmRvbUNvZGUoNikKICAgICAgfSk7CiAgICB9LAogICAgZGVsSXRlbTogZnVuY3Rpb24gZGVsSXRlbShpZCkgewogICAgICB2YXIgaSA9IHRoaXMubVZhbHVlLmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLmlkID09IGlkOwogICAgICB9KTsKICAgICAgdGhpcy5tVmFsdWUuc3BsaWNlKGksIDEpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA,OAAA,WAAA,MAAA,qBAAA;AACA,OAAA,eAAA,MAAA,0BAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAGA,EAAA,MAAA,EAAA,CAAA,WAAA,CAHA;AAKA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KADA;AAKA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KALA;AASA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA,oBAAA,CAAA;AAFA;AATA,GALA;AAoBA,EAAA,IApBA,kBAoBA;AACA,WAAA;AACA,MAAA,eAAA,EAAA;AADA,KAAA;AAGA,GAxBA;AA0BA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,qBACA;AAAA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,MAAA;;AACA,UAAA,KAAA,MAAA,CAAA,MAAA,uBAAA,KAAA,QAAA,mDAAA,eAAA,KAAA,CAAA,EAAA;AAAA;;AACA,aAAA,OAAA,CAAA;AACA,UAAA,KAAA,EAAA,MADA;AAEA,UAAA,OAAA,mEAAA,KAAA,QAAA,oDAAA,gBAAA,KAAA,uBAFA;AAGA,UAAA,IAAA,EAAA;AAHA,SAAA;AAKA;AACA;;AAEA,WAAA,MAAA,CAAA,IAAA,CAAA;AACA,QAAA,EAAA,EAAA,KAAA,cAAA,CAAA,CAAA;AADA,OAAA;AAGA,KAhBA;AAkBA,IAAA,OAlBA,mBAkBA,EAlBA,EAkBA;AACA,UAAA,CAAA,GAAA,KAAA,MAAA,CAAA,SAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,EAAA,IAAA,EAAA;AAAA,OAAA,CAAA;AACA,WAAA,MAAA,CAAA,MAAA,CAAA,CAAA,EAAA,CAAA;AACA;AArBA;AA1BA,CAAA","sourcesContent":["<!--\r\n * @Description: What's this for\r\n * @Autor: WangYuan\r\n * @Date: 2021-09-24 09:11:38\r\n * @LastEditors: WangYuan\r\n * @LastEditTime: 2022-02-14 14:16:44\r\n-->\r\n<template>\r\n  <config-wrap :title=\"label\">\r\n    <div class=\"mb10 f-grey f12\">{{ mOptions.note }}</div>\r\n    <div class=\"nav\">\r\n      <draggable v-model=\"mValue\">\r\n        <!-- 编译模式,插槽可供自定义拖拽组件入容器 -->\r\n        <slot v-if=\"edit\"></slot>\r\n\r\n        <!-- 非编译模式，根据schema子类遍历数组单项组件 -->\r\n        <template v-else>\r\n          <div v-for=\"item in mValue\" :key=\"item.id\" class=\"nav-item\">\r\n            <component\r\n              v-for=\"(val, key, index) in schema.child\"\r\n              :key=\"index\"\r\n              :is=\"typeToComponent[val.type]\"\r\n              v-model=\"item[key]\"\r\n              v-bind=\"val\"\r\n            >\r\n            </component>\r\n            <div class=\"nav-delete\" @click=\"delItem(item.id)\">x</div>\r\n          </div>\r\n        </template>\r\n      </draggable>\r\n\r\n      <div class=\"nav-add\" @click=\"addItem\">新增数据</div>\r\n    </div>\r\n  </config-wrap>\r\n</template>\r\n\r\n<script>\r\nimport schemaMixin from \"@/mixin/schemaMixin\";\r\nimport typeToComponent from \"@/config/schema-template\";\r\n\r\nexport default {\r\n  name: \"SchemaArray\",\r\n\r\n  mixins: [schemaMixin],\r\n\r\n  props: {\r\n    label: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    edit: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    schema: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      typeToComponent,\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    addItem() {\r\n      console.log(\"...\");\r\n      console.log(this.mValue);\r\n      if (this.mValue.length >= this.mOptions?.limit) {\r\n        this.$notify({\r\n          title: \"无法新增\",\r\n          message: `最多只能添加${this.mOptions?.limit}条数据`,\r\n          type: \"warning\",\r\n        });\r\n        return;\r\n      }\r\n\r\n      this.mValue.push({\r\n        id: this.$getRandomCode(6),\r\n      });\r\n    },\r\n\r\n    delItem(id) {\r\n      let i = this.mValue.findIndex((item) => item.id == id);\r\n      this.mValue.splice(i, 1);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n::v-deep .config-item {\r\n  margin-bottom: 10px !important;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/custom-schema-template/components/SchemaArray"}]}