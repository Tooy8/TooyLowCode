{"remainingRequest":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\babel-loader\\lib\\index.js!D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\src\\custom-schema-template\\components\\SchemaGoods\\GoodsConfigChoose.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\src\\custom-schema-template\\components\\SchemaGoods\\GoodsConfigChoose.vue","mtime":1693619752171},{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693619820390},{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\babel-loader\\lib\\index.js","mtime":1693619820336},{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693619820390},{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\vue-loader\\lib\\index.js","mtime":1693619864566}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L1x1NUYwMFx1NkU5MFx1OTg3OVx1NzZFRS9cdTRGNEVcdTRFRTNcdTc4MDEvVG9veS1Mb3dDb2RlL2xvd0NvZGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJEOi9cdTVGMDBcdTZFOTBcdTk4NzlcdTc2RUUvXHU0RjRFXHU0RUUzXHU3ODAxL1Rvb3ktTG93Q29kZS9sb3dDb2RlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7CmltcG9ydCB7IGdldEdvb2RzTGlzdCB9IGZyb20gIkAvYXBpL2dvb2RzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJHb29kc0NvbmZpZ0Nob29zZSIsCiAgcHJvcHM6IHsKICAgIHNob3c6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICB2YWx1ZTogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRMaXN0KCk7CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdmlzaWJsZTogZmFsc2UsCiAgICAgIHNlbGVjdExpc3Q6IFtdLAogICAgICBsaXN0OiBbXQogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKFsicHJvamVjdCJdKSksCiAgd2F0Y2g6IHsKICAgIHNob3c6IHsKICAgICAgaW1tZWRpYXRlOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgICAgIHRoaXMudmlzaWJsZSA9IHRoaXMuc2hvdzsKICAgICAgfQogICAgfSwKICAgIHZpc2libGU6IHsKICAgICAgaW1tZWRpYXRlOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgICAgIHRoaXMuJGVtaXQoInVwZGF0ZTpzaG93IiwgbmV3VmFsdWUpOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDojrflj5bllYbln47llYblk4HliJfooagKICAgIGdldExpc3Q6IGZ1bmN0aW9uIGdldExpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBfeWllbGQkZ2V0R29vZHNMaXN0LCBzdGF0dXMsIGxpc3Q7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGdldEdvb2RzTGlzdCh7CiAgICAgICAgICAgICAgICAgIHByb2plY3RJZDogX3RoaXMucHJvamVjdC5pZAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF95aWVsZCRnZXRHb29kc0xpc3QgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgc3RhdHVzID0gX3lpZWxkJGdldEdvb2RzTGlzdC5zdGF0dXM7CiAgICAgICAgICAgICAgICBsaXN0ID0gX3lpZWxkJGdldEdvb2RzTGlzdC5saXN0OwoKICAgICAgICAgICAgICAgIGlmIChzdGF0dXMgPT0gIjEwMDAwIikgewogICAgICAgICAgICAgICAgICAvLyDnrZvpgInlrZfmrrUKICAgICAgICAgICAgICAgICAgX3RoaXMubGlzdCA9IGxpc3Q7IC8vIOagueaNrumAieS4reWIl+ihqGlk77yM562b6YCJ5Yy56YWN5a+55bqU5pWw57uE77yM55So5LqO5Yu+6YCJ5Zue5pi+CgogICAgICAgICAgICAgICAgICBfdGhpcy5zZWxlY3RMaXN0ID0gX3RoaXMubGlzdC5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudmFsdWUuaW5jbHVkZXMoaXRlbS5pZCk7CiAgICAgICAgICAgICAgICAgIH0pOyAvLyDli77pgInlm57mmL7lm57osIPmlrnms5UKCiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzLnRvZ2dsZVNlbGVjdGlvbihfdGhpcy5zZWxlY3RMaXN0KTsKICAgICAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyDli77pgInlm57mmL4KICAgIHRvZ2dsZVNlbGVjdGlvbjogZnVuY3Rpb24gdG9nZ2xlU2VsZWN0aW9uKHJvd3MpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBpZiAocm93cykgewogICAgICAgIHJvd3MuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7CiAgICAgICAgICBfdGhpczIuJHJlZnMubXVsdGlwbGVUYWJsZS50b2dnbGVSb3dTZWxlY3Rpb24ocm93KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8vIOWLvumAiemAieS4rQogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMuc2VsZWN0TGlzdCA9IHZhbDsKICAgIH0sCiAgICAvLyDmj5DkuqQKICAgIHN1Ym1pdDogZnVuY3Rpb24gc3VibWl0KCkgewogICAgICB0aGlzLiRlbWl0KCJzdWJtaXQiLCB0aGlzLnNlbGVjdExpc3QubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0uaWQ7CiAgICAgIH0pKTsKICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["GoodsConfigChoose.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA,SAAA,UAAA,QAAA,MAAA;AACA,SAAA,YAAA,QAAA,aAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,mBADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KADA;AAKA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA;AAAA,eAAA,EAAA;AAAA;AAFA;AALA,GAFA;AAaA,EAAA,OAbA,qBAaA;AACA,SAAA,OAAA;AACA,GAfA;AAiBA,EAAA,IAjBA,kBAiBA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AAEA,MAAA,UAAA,EAAA,EAFA;AAGA,MAAA,IAAA,EAAA;AAHA,KAAA;AAKA,GAvBA;AAyBA,EAAA,QAAA,oBACA,UAAA,CAAA,CAAA,SAAA,CAAA,CADA,CAzBA;AA6BA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,SAAA,EAAA,IADA;AAEA,MAAA,OAFA,mBAEA,QAFA,EAEA,QAFA,EAEA;AACA,aAAA,OAAA,GAAA,KAAA,IAAA;AACA;AAJA,KADA;AAOA,IAAA,OAAA,EAAA;AACA,MAAA,SAAA,EAAA,IADA;AAEA,MAAA,OAFA,mBAEA,QAFA,EAEA,QAFA,EAEA;AACA,aAAA,KAAA,CAAA,aAAA,EAAA,QAAA;AACA;AAJA;AAPA,GA7BA;AA4CA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,OAFA,qBAEA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,YAAA,CAAA;AAAA,kBAAA,SAAA,EAAA,KAAA,CAAA,OAAA,CAAA;AAAA,iBAAA,CADA;;AAAA;AAAA;AACA,gBAAA,MADA,uBACA,MADA;AACA,gBAAA,IADA,uBACA,IADA;;AAGA,oBAAA,MAAA,IAAA,OAAA,EAAA;AACA;AACA,kBAAA,KAAA,CAAA,IAAA,GAAA,IAAA,CAFA,CAIA;;AACA,kBAAA,KAAA,CAAA,UAAA,GAAA,KAAA,CAAA,IAAA,CAAA,MAAA,CAAA,UAAA,IAAA,EAAA;AACA,2BAAA,KAAA,CAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,EAAA,CAAA;AACA,mBAFA,CAAA,CALA,CASA;;AACA,kBAAA,UAAA,CAAA,YAAA;AACA,oBAAA,KAAA,CAAA,eAAA,CAAA,KAAA,CAAA,UAAA;AACA,mBAFA,EAEA,CAFA,CAAA;AAGA;;AAhBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBA,KAnBA;AAqBA;AACA,IAAA,eAtBA,2BAsBA,IAtBA,EAsBA;AAAA;;AACA,UAAA,IAAA,EAAA;AACA,QAAA,IAAA,CAAA,OAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,KAAA,CAAA,aAAA,CAAA,kBAAA,CAAA,GAAA;AACA,SAFA;AAGA;AACA,KA5BA;AA8BA;AACA,IAAA,qBA/BA,iCA+BA,GA/BA,EA+BA;AACA,WAAA,UAAA,GAAA,GAAA;AACA,KAjCA;AAmCA;AACA,IAAA,MApCA,oBAoCA;AACA,WAAA,KAAA,CACA,QADA,EAEA,KAAA,UAAA,CAAA,GAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,EAAA;AAAA,OAAA,CAFA;AAIA,WAAA,OAAA,GAAA,KAAA;AACA;AA1CA;AA5CA,CAAA","sourcesContent":["<!--\r\n * @Description: What's this for\r\n * @Autor: WangYuan\r\n * @Date: 2021-06-24 10:29:52\r\n * @LastEditors: WangYuan\r\n * @LastEditTime: 2021-10-08 16:05:41\r\n-->\r\n<template>\r\n  <el-dialog\r\n    title=\"选择商品\"\r\n    :visible.sync=\"visible\"\r\n    :close-on-click-modal='false'\r\n    :append-to-body='true'\r\n    width=\"45%\"\r\n  >\r\n    <el-table\r\n      ref=\"multipleTable\"\r\n      :data=\"list\"\r\n      tooltip-effect=\"dark\"\r\n      style=\"width: 100%\"\r\n      max-height=\"300\"\r\n      @selection-change=\"handleSelectionChange\"\r\n    >\r\n      <el-table-column\r\n        type=\"selection\"\r\n        align='center'\r\n        header-align='center'\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"name\"\r\n        label=\"商品名\"\r\n        align='center'\r\n        header-align='center'\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"商品封面\"\r\n        align='center'\r\n        header-align='center'\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <img\r\n            class=\"w50 h50\"\r\n            :src=\"scope.row.cover\"\r\n          >\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"price\"\r\n        label=\"价格（元）\"\r\n        align='center'\r\n        header-align='center'\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"originalPrice\"\r\n        label=\"原价（元）\"\r\n        align='center'\r\n        header-align='center'\r\n      >\r\n      </el-table-column>\r\n    </el-table>\r\n    <span\r\n      slot=\"footer\"\r\n      class=\"dialog-footer\"\r\n    >\r\n      <el-button @click=\"visible = false\">取 消</el-button>\r\n      <el-button\r\n        type=\"primary\"\r\n        @click=\"submit\"\r\n      >确 定</el-button>\r\n    </span>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport { getGoodsList } from \"@/api/goods\";\r\n\r\nexport default {\r\n  name: \"GoodsConfigChoose\",\r\n  props: {\r\n    show: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    value: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n  },\r\n\r\n  created() {\r\n    this.getList();\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      visible: false,\r\n      selectList: [],\r\n      list: [],\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"project\"]),\r\n  },\r\n\r\n  watch: {\r\n    show: {\r\n      immediate: true,\r\n      handler(newValue, oldValue) {\r\n        this.visible = this.show;\r\n      },\r\n    },\r\n    visible: {\r\n      immediate: true,\r\n      handler(newValue, oldValue) {\r\n        this.$emit(\"update:show\", newValue);\r\n      },\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    // 获取商城商品列表\r\n    async getList() {\r\n      let { status, list } = await getGoodsList({ projectId: this.project.id });\r\n\r\n      if (status == \"10000\") {\r\n        // 筛选字段\r\n        this.list = list;\r\n\r\n        // 根据选中列表id，筛选匹配对应数组，用于勾选回显\r\n        this.selectList = this.list.filter((item) => {\r\n          return this.value.includes(item.id);\r\n        });\r\n\r\n        // 勾选回显回调方法\r\n        setTimeout(() => {\r\n          this.toggleSelection(this.selectList);\r\n        }, 0);\r\n      }\r\n    },\r\n\r\n    // 勾选回显\r\n    toggleSelection(rows) {\r\n      if (rows) {\r\n        rows.forEach((row) => {\r\n          this.$refs.multipleTable.toggleRowSelection(row);\r\n        });\r\n      }\r\n    },\r\n\r\n    // 勾选选中\r\n    handleSelectionChange(val) {\r\n      this.selectList = val;\r\n    },\r\n\r\n    // 提交\r\n    submit() {\r\n      this.$emit(\r\n        \"submit\",\r\n        this.selectList.map((item) => item.id)\r\n      );\r\n      this.visible = false;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n::v-deep .el-dialog {\r\n  .el-dialog__title {\r\n    font-size: 14px !important;\r\n    font-weight: 600;\r\n  }\r\n  .el-dialog__body {\r\n    padding: 10px 20px 30px 20px !important;\r\n  }\r\n}\r\n\r\n.wrap {\r\n  background: #f2f2f6;\r\n  height: 400px;\r\n  border-radius: 5px;\r\n}\r\n</style>"],"sourceRoot":"src/custom-schema-template/components/SchemaGoods"}]}