{"remainingRequest":"D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\node_modules\\babel-loader\\lib\\index.js!D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\src\\components\\SaveDialog\\HomeCover.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\src\\components\\SaveDialog\\HomeCover.vue","mtime":1693619752156},{"path":"D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693619820390},{"path":"D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\node_modules\\babel-loader\\lib\\index.js","mtime":1693619820336},{"path":"D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693619820390},{"path":"D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\node_modules\\vue-loader\\lib\\index.js","mtime":1693619864566}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L1x1NUYwMFx1NkU5MFx1OTg3OVx1NzZFRS9cdTU1NDZcdTU3Q0VcdTRGNEVcdTRFRTNcdTc4MDEvbWFsbC1jb29rL3BhY2thZ2VzL21hbGwtY29vay1wbGF0Zm9ybS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkQ6L1x1NUYwMFx1NkU5MFx1OTg3OVx1NzZFRS9cdTU1NDZcdTU3Q0VcdTRGNEVcdTRFRTNcdTc4MDEvbWFsbC1jb29rL3BhY2thZ2VzL21hbGwtY29vay1wbGF0Zm9ybS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnVpbnQ4LWFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuY29weS13aXRoaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5ldmVyeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbGwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmRleC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lmxhc3QtaW5kZXgtb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UtcmlnaHQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZXZlcnNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2V0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb21lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnN1YmFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tbG9jYWxlLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBSZWFsVGltZVZpZXcgZnJvbSAiQC9jb21wb25lbnRzL1RvcEJhci9SZWFsVGltZVZpZXciOwppbXBvcnQgeyB1cGxvYWRDb3ZlciB9IGZyb20gIkAvYXBpL3Byb2plY3QiOwppbXBvcnQgZ2xvYmFsIGZyb20gIkAvY29uZmlnL2dsb2JhbCI7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJIb21lQ292ZXIiLAogIGNvbXBvbmVudHM6IHsKICAgIFJlYWxUaW1lVmlldzogUmVhbFRpbWVWaWV3CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRNZXNzYWdlKCk7CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvdzogZmFsc2UKICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKFsicHJvamVjdCJdKSksIHt9LCB7CiAgICBpZnJhbWVVcmw6IGZ1bmN0aW9uIGlmcmFtZVVybCgpIHsKICAgICAgcmV0dXJuICIiLmNvbmNhdChnbG9iYWwudmlld1VybCwgInBhZ2VzL2J1aWxkL2J1aWxkP29wZXJhdGU9YnVpbGQiKTsKICAgIH0sCiAgICAvLyDpppbpobXphY3nva7mlbDmja4KICAgIGhvbWU6IGZ1bmN0aW9uIGhvbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLnByb2plY3QucGFnZXMuZmluZChmdW5jdGlvbiAocGFnZSkgewogICAgICAgIHJldHVybiBwYWdlLmhvbWU7CiAgICAgIH0pOwogICAgfQogIH0pLAogIG1ldGhvZHM6IHsKICAgIC8qKg0KICAgICAqIOWIneWni+WMlg0KICAgICAqIDEuIOWIneWni+WMlmlmcmFtZemhtemdog0KICAgICAqIDIuIOetieW+hTJz77yM6YCa55+laWZyYW1l6LCD55So5pa55rOV55Sf5oiQ5bCB6Z2iYmFzZTY0DQogICAgICoNCiAgICAgKi8KICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLm9wZW4oKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX3RoaXMuY3JlYXRlQ292ZXIoKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIOaJk+W8gOW8ueeql++8jOW5tuW7tui/nzJz6L+b6KGM5ZCO57ut5pON5L2c77yIMnPnlKjkuo7muLLmn5PvvIx1bmktYXBw5Zu+54mH5riy5p+T6L6D5oWi77yJCiAgICBvcGVuOiBmdW5jdGlvbiBvcGVuKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgX3RoaXMyLnNob3cgPSB0cnVlOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgIH0sIDEwMDApOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDlj5HpgIHnianmlpnliJfooajnlKjkuo7muLLmn5MKICAgIHNldFdpZGdldHNNZXNzYWdlOiBmdW5jdGlvbiBzZXRXaWRnZXRzTWVzc2FnZSgpIHsKICAgICAgdGhpcy4kcmVmcy5pZnJhbWUuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSh7CiAgICAgICAgZXZlbjogImxpc3QiLAogICAgICAgIHBhcmFtczogdGhpcy5ob21lLmNvbXBvbmVudExpc3QKICAgICAgfSwgIioiKTsKICAgIH0sCiAgICAvLyDlj5HpgIHkv6Hmga/vvIzpgJrnn6VpZnJhbWXosIPnlKjmlrnms5XnlJ/miJDlsIHpnaJiYXNlNjQKICAgIGNyZWF0ZUNvdmVyOiBmdW5jdGlvbiBjcmVhdGVDb3ZlcigpIHsKICAgICAgdGhpcy4kcmVmcy5pZnJhbWUuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSh7CiAgICAgICAgZXZlbjogImNvdmVyIgogICAgICB9LCAiKiIpOwogICAgfSwKICAgIC8vIOebkeWQrGlmcmFtZe+8jOeUn+aIkOWwgemdomJhc2U2NOWQjuS8mumAmuefpeWbnuiwgwogICAgZ2V0TWVzc2FnZTogZnVuY3Rpb24gZ2V0TWVzc2FnZSgpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIF9lJGRhdGEgPSBlLmRhdGEsCiAgICAgICAgICAgIHR5cGUgPSBfZSRkYXRhLnR5cGUsCiAgICAgICAgICAgIHBhcmFtcyA9IF9lJGRhdGEucGFyYW1zOwoKICAgICAgICBpZiAodHlwZSA9PSAiZ2V0Q292ZXJCYXNlNjQiKSB7CiAgICAgICAgICBzZWxmLnVwbG9hZChwYXJhbXMuYmFzZTY0KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOS4iuS8oOWwgemdogogICAgdXBsb2FkOiBmdW5jdGlvbiB1cGxvYWQoYmFzZTY0KSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICB2YXIgY292ZXJGaWxlID0gX3RoaXMzLmdldEZpbGUoYmFzZTY0KTsKCiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJkb21haW5JZCIsIDMpOwogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgiZGlyIiwgImltZyIpOwogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgiZmlsZSIsIGNvdmVyRmlsZSk7IC8vIOWbvueJh+S4iuS8oOacjeWKoeWZqAoKICAgICAgICB1cGxvYWRDb3Zlcihmb3JtRGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzLmVycm9yQ29kZSA9ICIwMDAwMCIpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIuWbvueJh+S4iuS8oOacjeWKoeWZqOaIkOWKnyIpOwoKICAgICAgICAgICAgX3RoaXMzLiRlbWl0KCJjb21wbGV0ZSIsIHsKICAgICAgICAgICAgICBzdGF0dXM6IDEsCiAgICAgICAgICAgICAgZGF0YTogcmVzLmRhdGEKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMzLnNob3cgPSBmYWxzZTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8gYmFzZTY05pW05ZCI5paH5Lu2CiAgICBnZXRGaWxlOiBmdW5jdGlvbiBnZXRGaWxlKGRhdGF1cmwpIHsKICAgICAgdmFyIGZpbGVuYW1lID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAiZmlsZSI7CiAgICAgIHZhciBhcnIgPSBkYXRhdXJsLnNwbGl0KCIsIik7CiAgICAgIHZhciBtaW1lID0gYXJyWzBdLm1hdGNoKC86KC4qPyk7LylbMV07CiAgICAgIHZhciBzdWZmaXggPSBtaW1lLnNwbGl0KCIvIilbMV07CiAgICAgIHZhciBic3RyID0gYXRvYihhcnJbMV0pOwogICAgICB2YXIgbiA9IGJzdHIubGVuZ3RoOwogICAgICB2YXIgdThhcnIgPSBuZXcgVWludDhBcnJheShuKTsKCiAgICAgIHdoaWxlIChuLS0pIHsKICAgICAgICB1OGFycltuXSA9IGJzdHIuY2hhckNvZGVBdChuKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG5ldyBGaWxlKFt1OGFycl0sICIiLmNvbmNhdChmaWxlbmFtZSwgIi4iKS5jb25jYXQoc3VmZml4KSwgewogICAgICAgIHR5cGU6IG1pbWUKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["HomeCover.vue"],"names":[],"mappings":"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","sourcesContent":["<!--\r\n * @Description: 首页封面\r\n * @Autor: WangYuan\r\n * @Date: 2021-09-27 17:45:38\r\n * @LastEditors: WangYuan\r\n * @LastEditTime: 2022-02-11 10:26:53\r\n-->\r\n<template>\r\n  <el-dialog\r\n    :visible.sync=\"show\"\r\n    :append-to-body=\"true\"\r\n    :show-close=\"false\"\r\n    :close-on-click-modal=\"false\"\r\n    top=\"50px\"\r\n    width=\"415px\"\r\n    class=\"flex-center\"\r\n  >\r\n    <div v-loading=\"show\" id=\"cover\" class=\"cover\">\r\n      <iframe\r\n        v-if=\"show\"\r\n        ref=\"iframe\"\r\n        class=\"w-100\"\r\n        frameborder=\"no\"\r\n        :style=\"{ height: '667px' }\"\r\n        :src=\"iframeUrl\"\r\n        @load=\"setWidgetsMessage\"\r\n      ></iframe>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport RealTimeView from \"@/components/TopBar/RealTimeView\";\r\nimport { uploadCover } from \"@/api/project\";\r\nimport global from \"@/config/global\";\r\nimport { mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  name: \"HomeCover\",\r\n\r\n  components: {\r\n    RealTimeView,\r\n  },\r\n\r\n  mounted() {\r\n    this.getMessage();\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      show: false,\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"project\"]),\r\n\r\n    iframeUrl() {\r\n      return `${global.viewUrl}pages/build/build?operate=build`;\r\n    },\r\n\r\n    // 首页配置数据\r\n    home() {\r\n      return this.project.pages.find((page) => page.home);\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    /**\r\n     * 初始化\r\n     * 1. 初始化iframe页面\r\n     * 2. 等待2s，通知iframe调用方法生成封面base64\r\n     *\r\n     */\r\n    async init() {\r\n      await this.open();\r\n\r\n      this.createCover();\r\n    },\r\n\r\n    // 打开弹窗，并延迟2s进行后续操作（2s用于渲染，uni-app图片渲染较慢）\r\n    open() {\r\n      return new Promise((resolve, reject) => {\r\n        this.show = true;\r\n        setTimeout(() => {\r\n          resolve();\r\n        }, 1000);\r\n      });\r\n    },\r\n\r\n    // 发送物料列表用于渲染\r\n    setWidgetsMessage() {\r\n      this.$refs.iframe.contentWindow.postMessage(\r\n        {\r\n          even: \"list\",\r\n          params: this.home.componentList,\r\n        },\r\n        \"*\"\r\n      );\r\n    },\r\n\r\n    // 发送信息，通知iframe调用方法生成封面base64\r\n    createCover() {\r\n      this.$refs.iframe.contentWindow.postMessage(\r\n        {\r\n          even: \"cover\",\r\n        },\r\n        \"*\"\r\n      );\r\n    },\r\n\r\n    // 监听iframe，生成封面base64后会通知回调\r\n    getMessage() {\r\n      let self = this;\r\n      window.addEventListener(\"message\", function (e) {\r\n        let { type, params } = e.data;\r\n        if (type == \"getCoverBase64\") {\r\n          self.upload(params.base64);\r\n        }\r\n      });\r\n    },\r\n\r\n    // 上传封面\r\n    upload(base64) {\r\n      return new Promise((resolve, reject) => {\r\n        let coverFile = this.getFile(base64);\r\n        let formData = new FormData();\r\n        formData.append(\"domainId\", 3);\r\n        formData.append(\"dir\", \"img\");\r\n        formData.append(\"file\", coverFile);\r\n        // 图片上传服务器\r\n        uploadCover(formData)\r\n          .then((res) => {\r\n            if ((res.errorCode = \"00000\")) {\r\n              console.log(\"图片上传服务器成功\");\r\n              this.$emit(\"complete\", {\r\n                status: 1,\r\n                data: res.data,\r\n              });\r\n            }\r\n          })\r\n          .finally(() => (this.show = false));\r\n      });\r\n    },\r\n\r\n    // base64整合文件\r\n    getFile(dataurl, filename = \"file\") {\r\n      let arr = dataurl.split(\",\");\r\n      let mime = arr[0].match(/:(.*?);/)[1];\r\n      let suffix = mime.split(\"/\")[1];\r\n      let bstr = atob(arr[1]);\r\n      let n = bstr.length;\r\n      let u8arr = new Uint8Array(n);\r\n      while (n--) {\r\n        u8arr[n] = bstr.charCodeAt(n);\r\n      }\r\n      return new File([u8arr], `${filename}.${suffix}`, {\r\n        type: mime,\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.cover {\r\n  width: 375px;\r\n  min-height: 667px;\r\n  overflow: hidden;\r\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/SaveDialog"}]}