{"remainingRequest":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\babel-loader\\lib\\index.js!D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\src\\components\\SaveDialog\\HomeCover.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\src\\components\\SaveDialog\\HomeCover.vue","mtime":1694431639992},{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693619820390},{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\babel-loader\\lib\\index.js","mtime":1693619820336},{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693619820390},{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\vue-loader\\lib\\index.js","mtime":1693619864566}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L1x1NUYwMFx1NkU5MFx1OTg3OVx1NzZFRS9cdTRGNEVcdTRFRTNcdTc4MDEvVG9veS1Mb3dDb2RlL2xvd0NvZGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJEOi9cdTVGMDBcdTZFOTBcdTk4NzlcdTc2RUUvXHU0RjRFXHU0RUUzXHU3ODAxL1Rvb3ktTG93Q29kZS9sb3dDb2RlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudWludDgtYXJyYXkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5jb3B5LXdpdGhpbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmV2ZXJ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmlsbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmluZGV4LW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkubGFzdC1pbmRleC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJlZHVjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJlZHVjZS1yaWdodC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJldmVyc2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zZXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNvbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb3J0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc3ViYXJyYXkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS50by1sb2NhbGUtc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFJlYWxUaW1lVmlldyBmcm9tICJAL2NvbXBvbmVudHMvVG9wQmFyL1JlYWxUaW1lVmlldyI7CmltcG9ydCB7IHVwbG9hZENvdmVyIH0gZnJvbSAiQC9hcGkvcHJvamVjdCI7CmltcG9ydCBnbG9iYWwgZnJvbSAiQC9jb25maWcvZ2xvYmFsIjsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gInZ1ZXgiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkhvbWVDb3ZlciIsCiAgY29tcG9uZW50czogewogICAgUmVhbFRpbWVWaWV3OiBSZWFsVGltZVZpZXcKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldE1lc3NhZ2UoKTsKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93OiBmYWxzZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoWyJwcm9qZWN0Il0pKSwge30sIHsKICAgIGlmcmFtZVVybDogZnVuY3Rpb24gaWZyYW1lVXJsKCkgewogICAgICByZXR1cm4gIiIuY29uY2F0KGdsb2JhbC52aWV3VXJsLCAicGFnZXMvYnVpbGQvYnVpbGQ/b3BlcmF0ZT1idWlsZCIpOwogICAgfSwKICAgIC8vIOmmlumhtemFjee9ruaVsOaNrgogICAgaG9tZTogZnVuY3Rpb24gaG9tZSgpIHsKICAgICAgcmV0dXJuIHRoaXMucHJvamVjdC5wYWdlcy5maW5kKGZ1bmN0aW9uIChwYWdlKSB7CiAgICAgICAgcmV0dXJuIHBhZ2UuaG9tZTsKICAgICAgfSk7CiAgICB9CiAgfSksCiAgbWV0aG9kczogewogICAgLyoqDQogICAgICog5Yid5aeL5YyWDQogICAgICogMS4g5Yid5aeL5YyWaWZyYW1l6aG16Z2iDQogICAgICogMi4g562J5b6FMnPvvIzpgJrnn6VpZnJhbWXosIPnlKjmlrnms5XnlJ/miJDlsIHpnaJiYXNlNjQNCiAgICAgKg0KICAgICAqLwogICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMub3BlbigpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBfdGhpcy5jcmVhdGVDb3ZlcigpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g5omT5byA5by556qX77yM5bm25bu26L+fMnPov5vooYzlkI7nu63mk43kvZzvvIgyc+eUqOS6jua4suafk++8jHVuaS1hcHDlm77niYfmuLLmn5PovoPmhaLvvIkKICAgIG9wZW46IGZ1bmN0aW9uIG9wZW4oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBfdGhpczIuc2hvdyA9IHRydWU7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgfSwgMTAwMCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWPkemAgeeJqeaWmeWIl+ihqOeUqOS6jua4suafkwogICAgc2V0V2lkZ2V0c01lc3NhZ2U6IGZ1bmN0aW9uIHNldFdpZGdldHNNZXNzYWdlKCkgewogICAgICB0aGlzLiRyZWZzLmlmcmFtZS5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKHsKICAgICAgICBldmVuOiAibGlzdCIsCiAgICAgICAgcGFyYW1zOiB0aGlzLmhvbWUuY29tcG9uZW50TGlzdAogICAgICB9LCAiKiIpOwogICAgfSwKICAgIC8vIOWPkemAgeS/oeaBr++8jOmAmuefpWlmcmFtZeiwg+eUqOaWueazleeUn+aIkOWwgemdomJhc2U2NAogICAgY3JlYXRlQ292ZXI6IGZ1bmN0aW9uIGNyZWF0ZUNvdmVyKCkgewogICAgICB0aGlzLiRyZWZzLmlmcmFtZS5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKHsKICAgICAgICBldmVuOiAiY292ZXIiCiAgICAgIH0sICIqIik7CiAgICB9LAogICAgLy8g55uR5ZCsaWZyYW1l77yM55Sf5oiQ5bCB6Z2iYmFzZTY05ZCO5Lya6YCa55+l5Zue6LCDCiAgICBnZXRNZXNzYWdlOiBmdW5jdGlvbiBnZXRNZXNzYWdlKCkgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgX2UkZGF0YSA9IGUuZGF0YSwKICAgICAgICAgICAgdHlwZSA9IF9lJGRhdGEudHlwZSwKICAgICAgICAgICAgcGFyYW1zID0gX2UkZGF0YS5wYXJhbXM7CgogICAgICAgIGlmICh0eXBlID09ICJnZXRDb3ZlckJhc2U2NCIpIHsKICAgICAgICAgIHNlbGYudXBsb2FkKHBhcmFtcy5iYXNlNjQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5LiK5Lyg5bCB6Z2iCiAgICB1cGxvYWQ6IGZ1bmN0aW9uIHVwbG9hZChiYXNlNjQpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciBjb3ZlckZpbGUgPSBfdGhpczMuZ2V0RmlsZShiYXNlNjQpOwoKICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImRvbWFpbklkIiwgMyk7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJkaXIiLCAiaW1nIik7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJmaWxlIiwgY292ZXJGaWxlKTsgLy8g5Zu+54mH5LiK5Lyg5pyN5Yqh5ZmoCgogICAgICAgIHVwbG9hZENvdmVyKGZvcm1EYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChyZXMuZXJyb3JDb2RlID0gIjAwMDAwIikgewogICAgICAgICAgICBjb25zb2xlLmxvZygi5Zu+54mH5LiK5Lyg5pyN5Yqh5Zmo5oiQ5YqfIik7CgogICAgICAgICAgICBfdGhpczMuJGVtaXQoImNvbXBsZXRlIiwgewogICAgICAgICAgICAgIHN0YXR1czogMSwKICAgICAgICAgICAgICBkYXRhOiByZXMuZGF0YQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBfdGhpczMuc2hvdyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyBiYXNlNjTmlbTlkIjmlofku7YKICAgIGdldEZpbGU6IGZ1bmN0aW9uIGdldEZpbGUoZGF0YXVybCkgewogICAgICB2YXIgZmlsZW5hbWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICJmaWxlIjsKICAgICAgdmFyIGFyciA9IGRhdGF1cmwuc3BsaXQoIiwiKTsKICAgICAgdmFyIG1pbWUgPSBhcnJbMF0ubWF0Y2goLzooLio/KTsvKVsxXTsKICAgICAgdmFyIHN1ZmZpeCA9IG1pbWUuc3BsaXQoIi8iKVsxXTsKICAgICAgdmFyIGJzdHIgPSBhdG9iKGFyclsxXSk7CiAgICAgIHZhciBuID0gYnN0ci5sZW5ndGg7CiAgICAgIHZhciB1OGFyciA9IG5ldyBVaW50OEFycmF5KG4pOwoKICAgICAgd2hpbGUgKG4tLSkgewogICAgICAgIHU4YXJyW25dID0gYnN0ci5jaGFyQ29kZUF0KG4pOwogICAgICB9CgogICAgICByZXR1cm4gbmV3IEZpbGUoW3U4YXJyXSwgIiIuY29uY2F0KGZpbGVuYW1lLCAiLiIpLmNvbmNhdChzdWZmaXgpLCB7CiAgICAgICAgdHlwZTogbWltZQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["HomeCover.vue"],"names":[],"mappings":"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","sourcesContent":["<!--\r\n * @Description: 首页封面\r\n\r\n-->\r\n<template>\r\n  <el-dialog :visible.sync=\"show\" :append-to-body=\"true\" :show-close=\"false\" :close-on-click-modal=\"false\" top=\"50px\"\r\n    width=\"415px\" class=\"flex-center\">\r\n    <div v-loading=\"show\" id=\"cover\" class=\"cover\">\r\n      <iframe v-if=\"show\" ref=\"iframe\" class=\"w-100\" frameborder=\"no\" :style=\"{ height: '667px' }\" :src=\"iframeUrl\"\r\n        @load=\"setWidgetsMessage\"></iframe>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport RealTimeView from \"@/components/TopBar/RealTimeView\";\r\nimport { uploadCover } from \"@/api/project\";\r\nimport global from \"@/config/global\";\r\nimport { mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  name: \"HomeCover\",\r\n\r\n  components: {\r\n    RealTimeView,\r\n  },\r\n\r\n  mounted() {\r\n    this.getMessage();\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      show: false,\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"project\"]),\r\n\r\n    iframeUrl() {\r\n      return `${global.viewUrl}pages/build/build?operate=build`;\r\n    },\r\n\r\n    // 首页配置数据\r\n    home() {\r\n      return this.project.pages.find((page) => page.home);\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    /**\r\n     * 初始化\r\n     * 1. 初始化iframe页面\r\n     * 2. 等待2s，通知iframe调用方法生成封面base64\r\n     *\r\n     */\r\n    async init() {\r\n      await this.open();\r\n\r\n      this.createCover();\r\n    },\r\n\r\n    // 打开弹窗，并延迟2s进行后续操作（2s用于渲染，uni-app图片渲染较慢）\r\n    open() {\r\n      return new Promise((resolve, reject) => {\r\n        this.show = true;\r\n        setTimeout(() => {\r\n          resolve();\r\n        }, 1000);\r\n      });\r\n    },\r\n\r\n    // 发送物料列表用于渲染\r\n    setWidgetsMessage() {\r\n      this.$refs.iframe.contentWindow.postMessage(\r\n        {\r\n          even: \"list\",\r\n          params: this.home.componentList,\r\n        },\r\n        \"*\"\r\n      );\r\n    },\r\n\r\n    // 发送信息，通知iframe调用方法生成封面base64\r\n    createCover() {\r\n      this.$refs.iframe.contentWindow.postMessage(\r\n        {\r\n          even: \"cover\",\r\n        },\r\n        \"*\"\r\n      );\r\n    },\r\n\r\n    // 监听iframe，生成封面base64后会通知回调\r\n    getMessage() {\r\n      let self = this;\r\n      window.addEventListener(\"message\", function (e) {\r\n        let { type, params } = e.data;\r\n        if (type == \"getCoverBase64\") {\r\n          self.upload(params.base64);\r\n        }\r\n      });\r\n    },\r\n\r\n    // 上传封面\r\n    upload(base64) {\r\n      return new Promise((resolve, reject) => {\r\n        let coverFile = this.getFile(base64);\r\n        let formData = new FormData();\r\n        formData.append(\"domainId\", 3);\r\n        formData.append(\"dir\", \"img\");\r\n        formData.append(\"file\", coverFile);\r\n        // 图片上传服务器\r\n        uploadCover(formData)\r\n          .then((res) => {\r\n            if ((res.errorCode = \"00000\")) {\r\n              console.log(\"图片上传服务器成功\");\r\n              this.$emit(\"complete\", {\r\n                status: 1,\r\n                data: res.data,\r\n              });\r\n            }\r\n          })\r\n          .finally(() => (this.show = false));\r\n      });\r\n    },\r\n\r\n    // base64整合文件\r\n    getFile(dataurl, filename = \"file\") {\r\n      let arr = dataurl.split(\",\");\r\n      let mime = arr[0].match(/:(.*?);/)[1];\r\n      let suffix = mime.split(\"/\")[1];\r\n      let bstr = atob(arr[1]);\r\n      let n = bstr.length;\r\n      let u8arr = new Uint8Array(n);\r\n      while (n--) {\r\n        u8arr[n] = bstr.charCodeAt(n);\r\n      }\r\n      return new File([u8arr], `${filename}.${suffix}`, {\r\n        type: mime,\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.cover {\r\n  width: 375px;\r\n  min-height: 667px;\r\n  overflow: hidden;\r\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/SaveDialog"}]}