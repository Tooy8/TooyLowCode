{"remainingRequest":"D:\\开源项目\\Tooy-LowCode\\lowCode\\node_modules\\babel-loader\\lib\\index.js!D:\\开源项目\\Tooy-LowCode\\lowCode\\src\\utils\\globalRegister.js","dependencies":[{"path":"D:\\开源项目\\Tooy-LowCode\\lowCode\\src\\utils\\globalRegister.js","mtime":1694165572654},{"path":"D:\\开源项目\\Tooy-LowCode\\lowCode\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693619820390},{"path":"D:\\开源项目\\Tooy-LowCode\\lowCode\\node_modules\\babel-loader\\lib\\index.js","mtime":1693619820336}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovXHU1RjAwXHU2RTkwXHU5ODc5XHU3NkVFL1Rvb3ktTG93Q29kZS9sb3dDb2RlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIkQ6L1x1NUYwMFx1NkU5MFx1OTg3OVx1NzZFRS9Ub295LUxvd0NvZGUvbG93Q29kZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CgovKg0KICogQERlc2NyaXB0aW9uOiDlhajlsYDms6jlhowNCiAqIEBBdXRvcjogV2FuZ1l1YW4NCiAqIEBEYXRlOiAyMDIxLTA2LTA0IDE2OjAwOjQ5DQogKiBATGFzdEVkaXRvcnM6IFdhbmdZdWFuDQogKiBATGFzdEVkaXRUaW1lOiAyMDIyLTAyLTA5IDIwOjQwOjI2DQogKi8KaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOyAvLyDms6jlhozmiYDmnInlhajlsYDnu4Tku7YKCnJlZ2lzdGVyKHJlcXVpcmUuY29udGV4dCgnQC9jb21wb25lbnRzL2dsb2JhbCcsIHRydWUsIC8udnVlLykpOyAvLyDms6jlhozmiYDmnInphY3nva7nu4Tku7YKCnJlZ2lzdGVyKHJlcXVpcmUuY29udGV4dCgnQC9jdXN0b20tc2NoZW1hLXRlbXBsYXRlJywgdHJ1ZSwgLy52dWUvKSk7IC8vIOazqOWGjOaJgOacieeJqeaWmQovLyByZWdpc3RlcihyZXF1aXJlLmNvbnRleHQoJy4uLy4uLy4uL21hbGwtY29vay10ZW1wbGF0ZS9zcmMvd2lkZ2V0cycsIHRydWUsIC8udnVlLykpCi8vIOiOt+WPluaJgOacieeJqeaWmeWIneWni+aVsOaNruS4jnNjaGVtYeaVsOaNrgoKcmVnaXN0ZXJDb21wb25lbnRzU2NoZW1hKCk7IC8vIC8qKgovLyAgKiDms6jlhozlr7nlupTljIXkuIvmiYDmnInnu4Tku7YKLy8gICogQHBhcmFtIHsqfSBwYXRoIOWMhei3r+W+hAovLyAgKi8KCmZ1bmN0aW9uIHJlZ2lzdGVyKGNvbnRleHQpIHsKICBjb250ZXh0LmtleXMoKS5mb3JFYWNoKGZ1bmN0aW9uIChjbnQpIHsKICAgIHZhciBjb21wb25lbnQgPSBjb250ZXh0KGNudCk7CiAgICB2YXIgY3RybCA9IGNvbXBvbmVudC5kZWZhdWx0IHx8IGNvbXBvbmVudDsKICAgIHZhciBhID0gY3RybC5uYW1lOwogICAgdmFyIGIgPSBjdHJsOyAvLyDms6jlhoznu4Tku7YKCiAgICBWdWUuY29tcG9uZW50KGEsIGIpOwogIH0pOwp9IC8vIOiOt+WPluaJgOacieiHquWumuS5iee7hOS7tnNjaGVtYQoKCmZ1bmN0aW9uIHJlZ2lzdGVyQ29tcG9uZW50c1NjaGVtYSgpIHsKICB2YXIgZmlsZXMgPSByZXF1aXJlLmNvbnRleHQoJy4uL2N1c3RvbS1jb21wb25lbnRzJywgdHJ1ZSwgL2NvbXBvbmVudC5qc29uJC8pOwoKICB2YXIgZmllbGRzID0ge307CiAgdmFyIGluaXRpYWxpemluZyA9IHt9OwogIGZpbGVzLmtleXMoKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgIHZhciBfa2V5JHNwbGl0ID0ga2V5LnNwbGl0KCcvJyksCiAgICAgICAgX2tleSRzcGxpdDIgPSBfc2xpY2VkVG9BcnJheShfa2V5JHNwbGl0LCAyKSwKICAgICAgICBuYW1lID0gX2tleSRzcGxpdDJbMV07CgogICAgdmFyIGNvbmZpZyA9IF9vYmplY3RTcHJlYWQoewogICAgICBjb21wb25lbnQ6IG5hbWUKICAgIH0sIGZpbGVzKGtleSkpOwoKICAgIGZpZWxkc1tuYW1lXSA9IGNvbmZpZy5maWVsZHM7CiAgICBpbml0aWFsaXppbmdbbmFtZV0gPSBpbml0RGVmYXVsVmFsdWUoY29uZmlnKTsKICB9KTsKICBWdWUucHJvdG90eXBlLiRmaWVsZHMgPSBmaWVsZHM7CiAgVnVlLnByb3RvdHlwZS4kaW5pdGlhbGl6aW5nID0gaW5pdGlhbGl6aW5nOwp9IC8vIOWIneWni+WMlue7hOS7tuWIneWni+aVsOaNrgoKCmZ1bmN0aW9uIGluaXREZWZhdWxWYWx1ZShjb25maWcpIHsKICB2YXIgY29tcG9uZW50ID0gY29uZmlnLmNvbXBvbmVudCwKICAgICAgbmFtZSA9IGNvbmZpZy5uYW1lLAogICAgICBpY29uID0gY29uZmlnLmljb24sCiAgICAgIGZpZWxkcyA9IGNvbmZpZy5maWVsZHM7CiAgdmFyIHRlbXAgPSB7CiAgICBjb21wb25lbnQ6IGNvbXBvbmVudCwKICAgIG5hbWU6IG5hbWUsCiAgICBpY29uOiBpY29uCiAgfTsKICBzZXREZWZhdWx0VmFsdWUoZmllbGRzLCB0ZW1wKTsKICByZXR1cm4gdGVtcDsKfSAvLyDpgJLlvZLorr7nva7lkITlsYLnuqfliJ3lp4vmlbDmja4KCgpmdW5jdGlvbiBzZXREZWZhdWx0VmFsdWUoZmllbGRzLCBpbml0aWFsaXppbmcpIHsKICBmb3IgKHZhciBrZXkgaW4gZmllbGRzKSB7CiAgICB2YXIgX2ZpZWxkcyRrZXkgPSBmaWVsZHNba2V5XSwKICAgICAgICB0eXBlID0gX2ZpZWxkcyRrZXkudHlwZSwKICAgICAgICB2YWx1ZSA9IF9maWVsZHMka2V5LnZhbHVlLAogICAgICAgIGNoaWxkID0gX2ZpZWxkcyRrZXkuY2hpbGQ7CgogICAgaWYgKHR5cGUgPT0gJ29iamVjdCcpIHsKICAgICAgaW5pdGlhbGl6aW5nW2tleV0gPSB7fTsKICAgICAgY2hpbGQgJiYgc2V0RGVmYXVsdFZhbHVlKGZpZWxkc1trZXldLmNoaWxkLCBpbml0aWFsaXppbmdba2V5XSk7CiAgICB9IGVsc2UgewogICAgICBpbml0aWFsaXppbmdba2V5XSA9IHZhbHVlOwogICAgfQogIH0KCiAgcmV0dXJuIGluaXRpYWxpemluZzsKfQ=="},{"version":3,"sources":["D:/开源项目/Tooy-LowCode/lowCode/src/utils/globalRegister.js"],"names":["Vue","register","require","context","registerComponentsSchema","keys","forEach","cnt","component","ctrl","default","a","name","b","files","fields","initializing","key","split","config","initDefaulValue","prototype","$fields","$initializing","icon","temp","setDefaultValue","type","value","child"],"mappings":"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","sourcesContent":["/*\r\n * @Description: 全局注册\r\n * @Autor: WangYuan\r\n * @Date: 2021-06-04 16:00:49\r\n * @LastEditors: WangYuan\r\n * @LastEditTime: 2022-02-09 20:40:26\r\n */\r\n\r\nimport Vue from 'vue'\r\n\r\n// 注册所有全局组件\r\nregister(require.context('@/components/global', true, /.vue/))\r\n\r\n// 注册所有配置组件\r\nregister(require.context('@/custom-schema-template', true, /.vue/))\r\n\r\n// 注册所有物料\r\n// register(require.context('../../../mall-cook-template/src/widgets', true, /.vue/))\r\n\r\n// 获取所有物料初始数据与schema数据\r\nregisterComponentsSchema()\r\n\r\n// /**\r\n//  * 注册对应包下所有组件\r\n//  * @param {*} path 包路径\r\n//  */\r\nfunction register(context) {\r\n  context.keys().forEach(cnt => {\r\n    const component = context(cnt)\r\n    let ctrl = component.default || component\r\n    let a = ctrl.name\r\n    let b = ctrl\r\n\r\n    // 注册组件\r\n    Vue.component(a, b)\r\n  })\r\n}\r\n\r\n// 获取所有自定义组件schema\r\nfunction registerComponentsSchema() {\r\n  const files = require.context('../custom-components', true, /component.json$/)\r\n  let fields = {}\r\n  let initializing = {}\r\n\r\n  files.keys().forEach(key => {\r\n    const [, name] = key.split('/')\r\n    let config = { component: name, ...files(key) }\r\n\r\n    fields[name] = config.fields\r\n    initializing[name] = initDefaulValue(config)\r\n  })\r\n  Vue.prototype.$fields = fields\r\n  Vue.prototype.$initializing = initializing\r\n}\r\n\r\n// 初始化组件初始数据\r\nfunction initDefaulValue(config) {\r\n  let { component, name, icon, fields } = config\r\n  let temp = { component, name, icon }\r\n  setDefaultValue(fields, temp)\r\n  return temp\r\n}\r\n\r\n// 递归设置各层级初始数据\r\nfunction setDefaultValue(fields, initializing) {\r\n  for (let key in fields) {\r\n    let { type, value, child } = fields[key]\r\n    if (type == 'object') {\r\n      initializing[key] = {}\r\n      child && setDefaultValue(fields[key].child, initializing[key])\r\n    } else {\r\n      initializing[key] = value\r\n    }\r\n  }\r\n  return initializing\r\n}\r\n"]}]}