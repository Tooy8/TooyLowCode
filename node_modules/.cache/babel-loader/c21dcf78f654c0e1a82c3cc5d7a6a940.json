{"remainingRequest":"D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\node_modules\\babel-loader\\lib\\index.js!D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\src\\components\\MiniMCE\\index.js","dependencies":[{"path":"D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\src\\components\\MiniMCE\\index.js","mtime":1693619752151},{"path":"D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693619820390},{"path":"D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\node_modules\\babel-loader\\lib\\index.js","mtime":1693619820336}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCAnLi9pbmRleC5zY3NzJzsKaW1wb3J0ICdtaW5pbWNlL2Rpc3Qvc3R5bGUuY3NzJzsKaW1wb3J0IE1pbmlNQ0UgZnJvbSAnbWluaW1jZSc7Ci8qKg0KICog5rWF6Imy5qih5byPDQogKi8KCmltcG9ydCAndGlueW1jZS9za2lucy91aS9veGlkZS9za2luLm1pbi5jc3MnOyAvLyDnmq7ogqQKCmltcG9ydCBjb250ZW50Q1NTIGZyb20gJyEhcmF3LWxvYWRlciF0aW55bWNlL3NraW5zL2NvbnRlbnQvZGVmYXVsdC9jb250ZW50Lm1pbi5jc3MnOwppbXBvcnQgY29udGVudFVJQ1NTIGZyb20gJyEhcmF3LWxvYWRlciF0aW55bWNlL3NraW5zL3VpL294aWRlL2NvbnRlbnQubWluLmNzcyc7Ci8qKg0KICog5rex6Imy5qih5byPDQogKi8KCi8qaW1wb3J0ICd0aW55bWNlL3NraW5zL3VpL294aWRlLWRhcmsvc2tpbi5taW4uY3NzJyAvLyDnmq7ogqQNCmltcG9ydCBjb250ZW50Q1NTIGZyb20gJyEhcmF3LWxvYWRlciF0aW55bWNlL3NraW5zL2NvbnRlbnQvZGFyay9jb250ZW50Lm1pbi5jc3MnDQppbXBvcnQgY29udGVudFVJQ1NTIGZyb20gJyEhcmF3LWxvYWRlciF0aW55bWNlL3NraW5zL3VpL294aWRlLWRhcmsvY29udGVudC5taW4uY3NzJyovCgovKioNCiAqIOS4u+mimO+8iOWPr+abtOaNou+8iQ0KICovCgppbXBvcnQgJ3RpbnltY2UvdGhlbWVzL3NpbHZlcic7Ci8qKg0KICog5Zu+5qCH77yI5Y+v5pu05o2i77yJDQogKi8KCmltcG9ydCAndGlueW1jZS9pY29ucy9kZWZhdWx0JzsKLyoqDQogKiDoh6rlrprkuYnlhoXlrrnmoLflvI/vvIjpnZ7lv4XpobvvvIkNCiAqIOivpeagt+W8j+S7heWcqOeUn+S6p+S+p+acieaViO+8jOS4jeWMheWQq+WcqOeUn+aIkOeahCBIVE1MIOaWh+acrOS4rQ0KICog5Y+v5ou36LSd6Iez5bGV56S65L6n5L2/55SoDQogKi8KCnZhciBjb250ZW50Q3VzdG9tQ1NTID0gIlxuICAubWNlLWNvbnRlbnQtYm9keSB7XG4gICAgbGluZS1oZWlnaHQ6IDEuODtcbiAgICBvdmVyZmxvdzogYXV0bztcbiAgfVxuICBwIHtcbiAgICBtYXJnaW4tYmxvY2stZW5kOiAwO1xuICAgIG1hcmdpbi1ibG9jay1zdGFydDogMDtcbiAgfVxuICBpbWcge1xuICAgIG1heC13aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IGF1dG8gIWltcG9ydGFudDtcbiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICB9XG4iOwovKioNCiAqIOiHquWumuS5ieaPkuS7tu+8iOmdnuW/hemhu++8iQ0KICovCgppbXBvcnQgSW5zZXJ0V29yZCBmcm9tICcuL3BsdWdpbnMvSW5zZXJ0V29yZC9pbmRleCc7CmltcG9ydCBJbnNlcnRJbWFnZSBmcm9tICcuL3BsdWdpbnMvSW5zZXJ0SW1hZ2UvaW5kZXgnOwppbXBvcnQgZ2xvYmFsIGZyb20gJ0AvY29uZmlnL2dsb2JhbCc7CmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICgpIHsKICBWdWUudXNlKE1pbmlNQ0UsIHsKICAgIG9wdGlvbnM6IHsKICAgICAgbGFuZ3VhZ2U6ICd6aF9DTicsCiAgICAgIGNvbnRlbnRfc3R5bGU6IFtjb250ZW50Q1NTLCBjb250ZW50VUlDU1MsIGNvbnRlbnRDdXN0b21DU1NdLmpvaW4oJ1xuJyksCiAgICAgIG1lbnU6IHsKICAgICAgICBpbnNlcnQ6IHsKICAgICAgICAgIHRpdGxlOiAnSW5zZXJ0JywKICAgICAgICAgIGl0ZW1zOiAnbG9jYWxpbWFnZSBkb2N4IHwgaW1hZ2UgbGluayBtZWRpYSB0ZW1wbGF0ZSBjb2Rlc2FtcGxlIGluc2VydHRhYmxlIHwgY2hhcm1hcCBlbW90aWNvbnMgaHIgfCBwYWdlYnJlYWsgbm9uYnJlYWtpbmcgYW5jaG9yIHRvYyB8IGluc2VydGRhdGV0aW1lJwogICAgICAgIH0KICAgICAgfSwKICAgICAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKGVkaXRvcikgewogICAgICAgIHZhciBpbnNlcnRJbWFnZSA9IEluc2VydEltYWdlKHsKICAgICAgICAgIGVkaXRvcjogZWRpdG9yCiAgICAgICAgfSk7CiAgICAgICAgZWRpdG9yLnVpLnJlZ2lzdHJ5LmFkZE1lbnVJdGVtKCdsb2NhbGltYWdlJywgewogICAgICAgICAgdGV4dDogJ+acrOWcsOWbvueJhycsCiAgICAgICAgICBpY29uOiAnaW1hZ2UnLAogICAgICAgICAgb25BY3Rpb246IGZ1bmN0aW9uIG9uQWN0aW9uKCkgewogICAgICAgICAgICBpbnNlcnRJbWFnZS4kY2hpbGRyZW5bMF0ub3BlbigpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHZhciBpbnNlcnRXb3JkID0gSW5zZXJ0V29yZCh7CiAgICAgICAgICBlZGl0b3I6IGVkaXRvcgogICAgICAgIH0pOwogICAgICAgIGVkaXRvci51aS5yZWdpc3RyeS5hZGRNZW51SXRlbSgnZG9jeCcsIHsKICAgICAgICAgIHRleHQ6ICdXb3JkIOaWh+ahoycsCiAgICAgICAgICBpY29uOiAnbmV3LWRvY3VtZW50JywKICAgICAgICAgIG9uQWN0aW9uOiBmdW5jdGlvbiBvbkFjdGlvbigpIHsKICAgICAgICAgICAgaW5zZXJ0V29yZC4kY2hpbGRyZW5bMF0ub3BlbigpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9LAogICAgICAvLyDnlKjkuo7lpI3liLbnspjotLTnmoTlm77niYflkowgVGlueU1DRSDoh6rluKbnmoTlm77niYfkuIrkvKAKICAgICAgaW1hZ2VzX3VwbG9hZF9oYW5kbGVyOiBmdW5jdGlvbiBpbWFnZXNfdXBsb2FkX2hhbmRsZXIoYmxvYkluZm8sIHByb2dyZXNzKSB7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgIHZhciBsb2FkaW5nID0gVnVlLnByb3RvdHlwZS4kbG9hZGluZygpOwogICAgICAgICAgdmFyIGJsb2IgPSBibG9iSW5mby5ibG9iKCk7CiAgICAgICAgICB2YXIgZmlsZSA9IG5ldyBGaWxlKFtibG9iXSwgYmxvYkluZm8uZmlsZW5hbWUoKSwgewogICAgICAgICAgICB0eXBlOiBibG9iLnR5cGUKICAgICAgICAgIH0pOwogICAgICAgICAgVnVlLnByb3RvdHlwZS4kUE9TVC51cGxvYWQoZ2xvYmFsLmJhc2VBcGkgKyAndXBsb2FkJywgewogICAgICAgICAgICBmaWxlOiBmaWxlCiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgaWYgKHR5cGVvZiByZXMuZGF0YSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICByZXNvbHZlKHJlcy5kYXRhKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZWplY3QocmVzLm1lc3NhZ2UpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgIHJlamVjdChTdHJpbmcoZXJyKSk7CiAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9KTsKfQ=="},{"version":3,"sources":["D:/开源项目/商城低代码/mall-cook/packages/mall-cook-platform/src/components/MiniMCE/index.js"],"names":["Vue","MiniMCE","contentCSS","contentUICSS","contentCustomCSS","InsertWord","InsertImage","global","use","options","language","content_style","join","menu","insert","title","items","setup","editor","insertImage","ui","registry","addMenuItem","text","icon","onAction","$children","open","insertWord","images_upload_handler","blobInfo","progress","Promise","resolve","reject","loading","prototype","$loading","blob","file","File","filename","type","$POST","upload","baseApi","then","res","data","message","catch","err","String","finally","close"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\n\r\nimport './index.scss'\r\nimport 'minimce/dist/style.css'\r\nimport MiniMCE from 'minimce'\r\n\r\n/**\r\n * 浅色模式\r\n */\r\nimport 'tinymce/skins/ui/oxide/skin.min.css' // 皮肤\r\nimport contentCSS from '!!raw-loader!tinymce/skins/content/default/content.min.css'\r\nimport contentUICSS from '!!raw-loader!tinymce/skins/ui/oxide/content.min.css'\r\n\r\n/**\r\n * 深色模式\r\n */\r\n/*import 'tinymce/skins/ui/oxide-dark/skin.min.css' // 皮肤\r\nimport contentCSS from '!!raw-loader!tinymce/skins/content/dark/content.min.css'\r\nimport contentUICSS from '!!raw-loader!tinymce/skins/ui/oxide-dark/content.min.css'*/\r\n\r\n/**\r\n * 主题（可更换）\r\n */\r\nimport 'tinymce/themes/silver'\r\n\r\n/**\r\n * 图标（可更换）\r\n */\r\nimport 'tinymce/icons/default'\r\n\r\n/**\r\n * 自定义内容样式（非必须）\r\n * 该样式仅在生产侧有效，不包含在生成的 HTML 文本中\r\n * 可拷贝至展示侧使用\r\n */\r\nconst contentCustomCSS = `\r\n  .mce-content-body {\r\n    line-height: 1.8;\r\n    overflow: auto;\r\n  }\r\n  p {\r\n    margin-block-end: 0;\r\n    margin-block-start: 0;\r\n  }\r\n  img {\r\n    max-width: 100%;\r\n    height: auto !important;\r\n    vertical-align: middle;\r\n  }\r\n`\r\n\r\n/**\r\n * 自定义插件（非必须）\r\n */\r\nimport InsertWord from './plugins/InsertWord/index'\r\nimport InsertImage from './plugins/InsertImage/index'\r\nimport global from '@/config/global'\r\n\r\nexport default function () {\r\n  Vue.use(MiniMCE, {\r\n    options: {\r\n      language: 'zh_CN',\r\n      content_style: [contentCSS, contentUICSS, contentCustomCSS].join('\\n'),\r\n      menu: {\r\n        insert: {\r\n          title: 'Insert',\r\n          items: 'localimage docx | image link media template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime'\r\n        },\r\n      },\r\n      setup(editor) {\r\n        const insertImage = InsertImage({ editor })\r\n        editor.ui.registry.addMenuItem('localimage', {\r\n          text: '本地图片',\r\n          icon: 'image',\r\n          onAction: () => {\r\n            insertImage.$children[0].open()\r\n          }\r\n        })\r\n\r\n        const insertWord = InsertWord({ editor })\r\n        editor.ui.registry.addMenuItem('docx', {\r\n          text: 'Word 文档',\r\n          icon: 'new-document',\r\n          onAction: () => {\r\n            insertWord.$children[0].open()\r\n          }\r\n        })\r\n      },\r\n      // 用于复制粘贴的图片和 TinyMCE 自带的图片上传\r\n      images_upload_handler: (blobInfo, progress) =>\r\n        new Promise((resolve, reject) => {\r\n          const loading = Vue.prototype.$loading()\r\n          const blob = blobInfo.blob()\r\n          const file = new File([blob], blobInfo.filename(), { type: blob.type })\r\n\r\n          Vue.prototype.$POST.upload(global.baseApi + 'upload', {\r\n            file,\r\n          }).then(res => {\r\n            if (typeof res.data === 'string') {\r\n              resolve(res.data)\r\n            } else {\r\n              reject(res.message)\r\n            }\r\n          }).catch(err => {\r\n            reject(String(err))\r\n          }).finally(() => {\r\n            loading.close()\r\n          })\r\n        }),\r\n    }\r\n  })\r\n}\r\n"]}]}