{"remainingRequest":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\babel-loader\\lib\\index.js!D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\src\\utils\\globalRegister.js","dependencies":[{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\src\\utils\\globalRegister.js","mtime":1694165572654},{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693619820390},{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\babel-loader\\lib\\index.js","mtime":1693619820336}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovXHU1RjAwXHU2RTkwXHU5ODc5XHU3NkVFL1x1NEY0RVx1NEVFM1x1NzgwMS9Ub295LUxvd0NvZGUvbG93Q29kZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICJEOi9cdTVGMDBcdTZFOTBcdTk4NzlcdTc2RUUvXHU0RjRFXHU0RUUzXHU3ODAxL1Rvb3ktTG93Q29kZS9sb3dDb2RlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKCi8qDQogKiBARGVzY3JpcHRpb246IOWFqOWxgOazqOWGjA0KICogQEF1dG9yOiBXYW5nWXVhbg0KICogQERhdGU6IDIwMjEtMDYtMDQgMTY6MDA6NDkNCiAqIEBMYXN0RWRpdG9yczogV2FuZ1l1YW4NCiAqIEBMYXN0RWRpdFRpbWU6IDIwMjItMDItMDkgMjA6NDA6MjYNCiAqLwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7IC8vIOazqOWGjOaJgOacieWFqOWxgOe7hOS7tgoKcmVnaXN0ZXIocmVxdWlyZS5jb250ZXh0KCdAL2NvbXBvbmVudHMvZ2xvYmFsJywgdHJ1ZSwgLy52dWUvKSk7IC8vIOazqOWGjOaJgOaciemFjee9rue7hOS7tgoKcmVnaXN0ZXIocmVxdWlyZS5jb250ZXh0KCdAL2N1c3RvbS1zY2hlbWEtdGVtcGxhdGUnLCB0cnVlLCAvLnZ1ZS8pKTsgLy8g5rOo5YaM5omA5pyJ54mp5paZCi8vIHJlZ2lzdGVyKHJlcXVpcmUuY29udGV4dCgnLi4vLi4vLi4vbWFsbC1jb29rLXRlbXBsYXRlL3NyYy93aWRnZXRzJywgdHJ1ZSwgLy52dWUvKSkKLy8g6I635Y+W5omA5pyJ54mp5paZ5Yid5aeL5pWw5o2u5LiOc2NoZW1h5pWw5o2uCgpyZWdpc3RlckNvbXBvbmVudHNTY2hlbWEoKTsgLy8gLyoqCi8vICAqIOazqOWGjOWvueW6lOWMheS4i+aJgOaciee7hOS7tgovLyAgKiBAcGFyYW0geyp9IHBhdGgg5YyF6Lev5b6ECi8vICAqLwoKZnVuY3Rpb24gcmVnaXN0ZXIoY29udGV4dCkgewogIGNvbnRleHQua2V5cygpLmZvckVhY2goZnVuY3Rpb24gKGNudCkgewogICAgdmFyIGNvbXBvbmVudCA9IGNvbnRleHQoY250KTsKICAgIHZhciBjdHJsID0gY29tcG9uZW50LmRlZmF1bHQgfHwgY29tcG9uZW50OwogICAgdmFyIGEgPSBjdHJsLm5hbWU7CiAgICB2YXIgYiA9IGN0cmw7IC8vIOazqOWGjOe7hOS7tgoKICAgIFZ1ZS5jb21wb25lbnQoYSwgYik7CiAgfSk7Cn0gLy8g6I635Y+W5omA5pyJ6Ieq5a6a5LmJ57uE5Lu2c2NoZW1hCgoKZnVuY3Rpb24gcmVnaXN0ZXJDb21wb25lbnRzU2NoZW1hKCkgewogIHZhciBmaWxlcyA9IHJlcXVpcmUuY29udGV4dCgnLi4vY3VzdG9tLWNvbXBvbmVudHMnLCB0cnVlLCAvY29tcG9uZW50Lmpzb24kLyk7CgogIHZhciBmaWVsZHMgPSB7fTsKICB2YXIgaW5pdGlhbGl6aW5nID0ge307CiAgZmlsZXMua2V5cygpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgdmFyIF9rZXkkc3BsaXQgPSBrZXkuc3BsaXQoJy8nKSwKICAgICAgICBfa2V5JHNwbGl0MiA9IF9zbGljZWRUb0FycmF5KF9rZXkkc3BsaXQsIDIpLAogICAgICAgIG5hbWUgPSBfa2V5JHNwbGl0MlsxXTsKCiAgICB2YXIgY29uZmlnID0gX29iamVjdFNwcmVhZCh7CiAgICAgIGNvbXBvbmVudDogbmFtZQogICAgfSwgZmlsZXMoa2V5KSk7CgogICAgZmllbGRzW25hbWVdID0gY29uZmlnLmZpZWxkczsKICAgIGluaXRpYWxpemluZ1tuYW1lXSA9IGluaXREZWZhdWxWYWx1ZShjb25maWcpOwogIH0pOwogIFZ1ZS5wcm90b3R5cGUuJGZpZWxkcyA9IGZpZWxkczsKICBWdWUucHJvdG90eXBlLiRpbml0aWFsaXppbmcgPSBpbml0aWFsaXppbmc7Cn0gLy8g5Yid5aeL5YyW57uE5Lu25Yid5aeL5pWw5o2uCgoKZnVuY3Rpb24gaW5pdERlZmF1bFZhbHVlKGNvbmZpZykgewogIHZhciBjb21wb25lbnQgPSBjb25maWcuY29tcG9uZW50LAogICAgICBuYW1lID0gY29uZmlnLm5hbWUsCiAgICAgIGljb24gPSBjb25maWcuaWNvbiwKICAgICAgZmllbGRzID0gY29uZmlnLmZpZWxkczsKICB2YXIgdGVtcCA9IHsKICAgIGNvbXBvbmVudDogY29tcG9uZW50LAogICAgbmFtZTogbmFtZSwKICAgIGljb246IGljb24KICB9OwogIHNldERlZmF1bHRWYWx1ZShmaWVsZHMsIHRlbXApOwogIHJldHVybiB0ZW1wOwp9IC8vIOmAkuW9kuiuvue9ruWQhOWxgue6p+WIneWni+aVsOaNrgoKCmZ1bmN0aW9uIHNldERlZmF1bHRWYWx1ZShmaWVsZHMsIGluaXRpYWxpemluZykgewogIGZvciAodmFyIGtleSBpbiBmaWVsZHMpIHsKICAgIHZhciBfZmllbGRzJGtleSA9IGZpZWxkc1trZXldLAogICAgICAgIHR5cGUgPSBfZmllbGRzJGtleS50eXBlLAogICAgICAgIHZhbHVlID0gX2ZpZWxkcyRrZXkudmFsdWUsCiAgICAgICAgY2hpbGQgPSBfZmllbGRzJGtleS5jaGlsZDsKCiAgICBpZiAodHlwZSA9PSAnb2JqZWN0JykgewogICAgICBpbml0aWFsaXppbmdba2V5XSA9IHt9OwogICAgICBjaGlsZCAmJiBzZXREZWZhdWx0VmFsdWUoZmllbGRzW2tleV0uY2hpbGQsIGluaXRpYWxpemluZ1trZXldKTsKICAgIH0gZWxzZSB7CiAgICAgIGluaXRpYWxpemluZ1trZXldID0gdmFsdWU7CiAgICB9CiAgfQoKICByZXR1cm4gaW5pdGlhbGl6aW5nOwp9"},{"version":3,"sources":["D:/开源项目/低代码/Tooy-LowCode/lowCode/src/utils/globalRegister.js"],"names":["Vue","register","require","context","registerComponentsSchema","keys","forEach","cnt","component","ctrl","default","a","name","b","files","fields","initializing","key","split","config","initDefaulValue","prototype","$fields","$initializing","icon","temp","setDefaultValue","type","value","child"],"mappings":"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","sourcesContent":["/*\r\n * @Description: 全局注册\r\n * @Autor: WangYuan\r\n * @Date: 2021-06-04 16:00:49\r\n * @LastEditors: WangYuan\r\n * @LastEditTime: 2022-02-09 20:40:26\r\n */\r\n\r\nimport Vue from 'vue'\r\n\r\n// 注册所有全局组件\r\nregister(require.context('@/components/global', true, /.vue/))\r\n\r\n// 注册所有配置组件\r\nregister(require.context('@/custom-schema-template', true, /.vue/))\r\n\r\n// 注册所有物料\r\n// register(require.context('../../../mall-cook-template/src/widgets', true, /.vue/))\r\n\r\n// 获取所有物料初始数据与schema数据\r\nregisterComponentsSchema()\r\n\r\n// /**\r\n//  * 注册对应包下所有组件\r\n//  * @param {*} path 包路径\r\n//  */\r\nfunction register(context) {\r\n  context.keys().forEach(cnt => {\r\n    const component = context(cnt)\r\n    let ctrl = component.default || component\r\n    let a = ctrl.name\r\n    let b = ctrl\r\n\r\n    // 注册组件\r\n    Vue.component(a, b)\r\n  })\r\n}\r\n\r\n// 获取所有自定义组件schema\r\nfunction registerComponentsSchema() {\r\n  const files = require.context('../custom-components', true, /component.json$/)\r\n  let fields = {}\r\n  let initializing = {}\r\n\r\n  files.keys().forEach(key => {\r\n    const [, name] = key.split('/')\r\n    let config = { component: name, ...files(key) }\r\n\r\n    fields[name] = config.fields\r\n    initializing[name] = initDefaulValue(config)\r\n  })\r\n  Vue.prototype.$fields = fields\r\n  Vue.prototype.$initializing = initializing\r\n}\r\n\r\n// 初始化组件初始数据\r\nfunction initDefaulValue(config) {\r\n  let { component, name, icon, fields } = config\r\n  let temp = { component, name, icon }\r\n  setDefaultValue(fields, temp)\r\n  return temp\r\n}\r\n\r\n// 递归设置各层级初始数据\r\nfunction setDefaultValue(fields, initializing) {\r\n  for (let key in fields) {\r\n    let { type, value, child } = fields[key]\r\n    if (type == 'object') {\r\n      initializing[key] = {}\r\n      child && setDefaultValue(fields[key].child, initializing[key])\r\n    } else {\r\n      initializing[key] = value\r\n    }\r\n  }\r\n  return initializing\r\n}\r\n"]}]}