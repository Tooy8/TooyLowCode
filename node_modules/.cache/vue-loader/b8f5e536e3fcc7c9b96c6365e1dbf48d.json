{"remainingRequest":"D:\\开源项目\\Tooy-LowCode\\lowCode\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\开源项目\\Tooy-LowCode\\lowCode\\src\\components\\Control\\ControlPanel.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\开源项目\\Tooy-LowCode\\lowCode\\src\\components\\Control\\ControlPanel.vue","mtime":1693619752149},{"path":"D:\\开源项目\\Tooy-LowCode\\lowCode\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693619820390},{"path":"D:\\开源项目\\Tooy-LowCode\\lowCode\\node_modules\\babel-loader\\lib\\index.js","mtime":1693619820336},{"path":"D:\\开源项目\\Tooy-LowCode\\lowCode\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693619820390},{"path":"D:\\开源项目\\Tooy-LowCode\\lowCode\\node_modules\\vue-loader\\lib\\index.js","mtime":1693619864566}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQ29udHJvbFdpZGdldFNoYXBlIGZyb20gIi4vQ29udHJvbFdpZGdldFNoYXBlLnZ1ZSI7DQppbXBvcnQgZ2xvYmFsIGZyb20gIkAvY29uZmlnL2dsb2JhbCI7DQppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBNdXRhdGlvbnMgfSBmcm9tICJ2dWV4IjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7IENvbnRyb2xXaWRnZXRTaGFwZSB9LA0KDQogIGluamVjdDogWyJjb250cm9sIl0sDQoNCiAgY3JlYXRlZCgpIHsNCiAgICBjb25zb2xlLmxvZygi5Yib5bu66aG16Z2iIik7DQoNCiAgICB0aGlzLmluaXRJZnJhbWUgPSB0cnVlOw0KICB9LA0KDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5jb250cm9sLmg1SWZyYW1lID0gdGhpcy4kcmVmcy5pZnJhbWU7DQogICAgdGhpcy5nZXRNZXNzYWdlKCk7DQogIH0sDQoNCiAgZGVzdHJveWVkKCkgew0KICAgIGNvbnNvbGUubG9nKCLms6jplIDpobXpnaIiKTsNCg0KICAgIHRoaXMuaW5pdElmcmFtZSA9IGZhbHNlOw0KICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIix0aGlzLmdldE1lc3NhZ2VIYW5kbGUpOw0KICB9LA0KDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHdpZGdldEluZm9MaXN0OiBbXSwNCiAgICAgIGlmcmFtZUhlaWdodDogNjY3LA0KICAgICAgaW5pdElmcmFtZTogZmFsc2UsDQogICAgfTsNCiAgfSwNCg0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcEdldHRlcnMoWyJwcm9qZWN0Il0pLA0KDQogICAgaWZyYW1lVXJsKCkgew0KICAgICAgcmV0dXJuIGAke2dsb2JhbC52aWV3VXJsfXBhZ2VzL2J1aWxkL2J1aWxkP29wZXJhdGU9YnVpbGRgOw0KICAgIH0sDQogIH0sDQoNCiAgLy8g55uR5ZCs54mp5paZ5YiX6KGo5Y+R55Sf5Y+Y5YyW77yM6YCa55+laWZyYW1l5ZCM5q2l5pu05pawDQogIHdhdGNoOiB7DQogICAgImNvbnRyb2wuY3VyUGFnZS5jb21wb25lbnRMaXN0Ijogew0KICAgICAgaGFuZGxlcigpIHsNCiAgICAgICAgdGhpcy5tZXNzYWdlTGlzdCgpOw0KICAgICAgfSwNCiAgICAgIGRlZXA6IHRydWUsDQogICAgfSwNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgLy8g5Y+R6YCB5L+h5oGv77yM5ZCM5q2l5Yid5aeL5YyWaWZyYW1lDQogICAgaW5pdCgpIHsNCiAgICAgIGNvbnNvbGUubG9nKCLliJ3lp4vljJYuLi4iKTsNCg0KICAgICAgdGhpcy5tZXNzYWdlSW5pdCgpOw0KICAgICAgdGhpcy5tZXNzYWdlTGlzdCgpOw0KICAgIH0sDQoNCiAgICAvLyDmjqXmlLZpZnJhbWXkv6Hmga8NCiAgICBnZXRNZXNzYWdlKCkgew0KICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCB0aGlzLmdldE1lc3NhZ2VIYW5kbGUpOw0KICAgIH0sDQoNCiAgICBnZXRNZXNzYWdlSGFuZGxlKGUpIHsNCiAgICAgIGxldCBzZWxmID0gdGhpczsNCiAgICAgIGxldCB7IHR5cGUsIHBhcmFtcyB9ID0gZS5kYXRhOw0KICAgICAgc3dpdGNoICh0eXBlKSB7DQogICAgICAgIGNhc2UgInNldExpc3QiOg0KICAgICAgICAgIHNlbGYuc2V0TGlzdChwYXJhbXMpOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICJzZXRIZWlnaHQiOg0KICAgICAgICAgIHNlbGYuc2V0SGVpZ2h0KHBhcmFtcyk7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgInNldEN1cnJXaWRnZXQiOg0KICAgICAgICAgIHNlbGYuc2V0Q3VycldpZGdldChwYXJhbXMpOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICAvLyDorr7nva7pobXpnaLpq5jluqYNCiAgICBzZXRIZWlnaHQocGFyYW1zKSB7DQogICAgICB0aGlzLndpZGdldEluZm9MaXN0ID0gcGFyYW1zOw0KICAgICAgdGhpcy5pZnJhbWVIZWlnaHQgPSB0aGlzLndpZGdldEluZm9MaXN0LnJlZHVjZSgoYSwgYikgPT4gYSArIGIuaGVpZ2h0LCAwKTsNCiAgICAgIC8vIGNvbnNvbGUubG9nKGDlvZPliY3pq5jluqbvvJoke3RoaXMuaWZyYW1lSGVpZ2h0fWApOw0KICAgIH0sDQoNCiAgICAvLyBpZnJhbWXlhoXnianmlpnliJfooajlj5HnlJ/lj5jljJbvvIzlkIzmraXmm7TmlrANCiAgICBzZXRMaXN0KHBhcmFtcykgew0KICAgICAgY29uc29sZS5sb2coIiBpZnJhbWXlhoXnianmlpnliJfooajlj5HnlJ/lj5jljJbvvIzlkIzmraXmm7TmlrAiKTsNCiAgICAgIGNvbnNvbGUubG9nKHBhcmFtcyk7DQogICAgICBjb25zb2xlLmxvZyh0aGlzLmNvbnRyb2wuY3VyUGFnZS5uYW1lKTsNCg0KICAgICAgbGV0IHsgbGlzdCB9ID0gcGFyYW1zOw0KICAgICAgdGhpcy5jb250cm9sLmN1clBhZ2UuY29tcG9uZW50TGlzdCA9IGxpc3Q7DQogICAgICBjb25zb2xlLmxvZyh0aGlzLnByb2plY3QpOw0KICAgIH0sDQoNCiAgICAvLyDorr7nva7pgInkuK3nianmlpkNCiAgICBzZXRDdXJyV2lkZ2V0KHBhcmFtcykgew0KICAgICAgbGV0IHsgaWQgfSA9IHBhcmFtczsNCiAgICAgIHRoaXMuY29udHJvbC5jdXJXaWRnZXQgPSB0aGlzLmNvbnRyb2wuY3VyUGFnZS5jb21wb25lbnRMaXN0LmZpbmQoDQogICAgICAgIChpdGVtKSA9PiBpZCA9PSBpdGVtLmlkDQogICAgICApOw0KICAgIH0sDQoNCiAgICAvLyDkv67mlLnpgInkuK3nianmlpnvvIzlubbpgJrnn6VpZnJhbWXvvIzlkIzmraXmm7TmlrANCiAgICBjaGFuZ2VDdXJyV2lkZ2V0KHdpZGdldCkgew0KICAgICAgdGhpcy5zZXRDdXJyV2lkZ2V0KHdpZGdldCk7DQogICAgICB0aGlzLiRyZWZzLmlmcmFtZS5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKA0KICAgICAgICB7DQogICAgICAgICAgZXZlbjogImNoYW5nZUN1cnJXaWRnZXQiLA0KICAgICAgICAgIHBhcmFtczogeyBpZDogd2lkZ2V0LmlkIH0sDQogICAgICAgIH0sDQogICAgICAgICIqIg0KICAgICAgKTsNCiAgICB9LA0KDQogICAgLy8g6LCD55So54mp5paZ5ouW5ou956e75YqoKOiKgua1gSkNCiAgICBsYXllck1vdmUoZSwgaW5kZXgpIHsNCiAgICAgIHRoaXMudGhyb3R0bGUodGhpcy5sYXllck1vdmVGdW4sIDEpKGUsIGluZGV4KTsNCiAgICB9LA0KDQogICAgLy8g54mp5paZ5ouW5ou956e75YqoLOaOp+WItndhaXRpbmfnp7vliqgNCiAgICBsYXllck1vdmVGdW4oZSkgew0KICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsNCg0KICAgICAgY29uc29sZS5sb2coIueJqeaWmeaLluaLveenu+WKqCzmjqfliLZ3YWl0aW5n56e75YqoIik7DQoNCiAgICAgIGlmICghdGhpcy5jb250cm9sLmRyYWdzdGF0dXMpIHJldHVybjsNCg0KICAgICAgbGV0IHR5cGUgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoInR5cGUiKTsNCiAgICAgIGxldCBwYXJhbXMgPSB7DQogICAgICAgIHR5cGU6ICJwYWdlIiwNCiAgICAgIH07DQoNCiAgICAgIGlmICh0eXBlID09ICJ3aWRnZXQiKSB7DQogICAgICAgIGxldCBbeSwgaF0gPSBbZS5vZmZzZXRZLCBlLnRhcmdldC5vZmZzZXRIZWlnaHRdOw0KICAgICAgICBwYXJhbXMgPSB7DQogICAgICAgICAgaWQ6IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgiaWQiKSwNCiAgICAgICAgICB0eXBlOiAid2lkZ2V0IiwNCiAgICAgICAgICBkaXJlY3Rpb246IHkgPCBoIC8gMiwNCiAgICAgICAgfTsNCiAgICAgIH0NCg0KICAgICAgdGhpcy4kcmVmcy5pZnJhbWUuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSgNCiAgICAgICAgew0KICAgICAgICAgIGV2ZW46ICJtb3ZlIiwNCiAgICAgICAgICBwYXJhbXMsDQogICAgICAgIH0sDQogICAgICAgICIqIg0KICAgICAgKTsNCiAgICB9LA0KDQogICAgLy8g5Y+R6YCB5L+h5oGv77yM5b2T5YmN5ZWG5Z+O6YWN572u5pWw5o2uDQogICAgbWVzc2FnZUluaXQoKSB7DQogICAgICB0aGlzLiRyZWZzLmlmcmFtZS5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKA0KICAgICAgICB7DQogICAgICAgICAgZXZlbjogImluaXQiLA0KICAgICAgICAgIHBhcmFtczogeyBwcm9qZWN0OiB0aGlzLnByb2plY3QgfSwNCiAgICAgICAgfSwNCiAgICAgICAgIioiDQogICAgICApOw0KICAgIH0sDQoNCiAgICAvLyDlj5HpgIHkv6Hmga/vvIzlkIzmraVpZnJhbWXnp43nianmlpnmlbDnu4QNCiAgICBtZXNzYWdlTGlzdCgpIHsNCiAgICAgIGNvbnNvbGUubG9nKCLlj5HpgIHkv6Hmga/vvIzlkIzmraVpZnJhbWXnp43nianmlpnmlbDnu4QiKTsNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuY29udHJvbC5jdXJQYWdlKTsNCg0KICAgICAgY29uc29sZS5sb2codGhpcy5jb250cm9sLmN1clBhZ2UuY29tcG9uZW50TGlzdCk7DQoNCiAgICAgIHRoaXMuJHJlZnMuaWZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoDQogICAgICAgIHsNCiAgICAgICAgICBldmVuOiAibGlzdCIsDQogICAgICAgICAgcGFyYW1zOiB0aGlzLmNvbnRyb2wuY3VyUGFnZS5jb21wb25lbnRMaXN0LA0KICAgICAgICB9LA0KICAgICAgICAiKiINCiAgICAgICk7DQogICAgfSwNCg0KICAgIC8vIOiKgua1gQ0KICAgIHRocm90dGxlKGZ1bmMsIHdhaXQpIHsNCiAgICAgIGxldCB0aW1lb3V0Ow0KICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgbGV0IGNvbnRleHQgPSB0aGlzOw0KICAgICAgICBsZXQgYXJncyA9IGFyZ3VtZW50czsNCiAgICAgICAgaWYgKCF0aW1lb3V0KSB7DQogICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgdGltZW91dCA9IG51bGw7DQogICAgICAgICAgICBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpOw0KICAgICAgICAgIH0sIHdhaXQpOw0KICAgICAgICB9DQogICAgICB9Ow0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["ControlPanel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ControlPanel.vue","sourceRoot":"src/components/Control","sourcesContent":["<!--\r\n * @Description: 面板\r\n * @Autor: WangYuan\r\n * @Date: 2022-01-11 20:06:56\r\n * @LastEditors: WangYuan\r\n * @LastEditTime: 2022-03-21 16:00:58\r\n-->\r\n<template>\r\n  <div class=\"panel\">\r\n    <phone-ctn>\r\n      <div class=\"page\">\r\n        <iframe\r\n          v-if=\"initIframe\"\r\n          ref=\"iframe\"\r\n          class=\"page-iframe\"\r\n          frameborder=\"no\"\r\n          :style=\"{\r\n            height: iframeHeight + 'px',\r\n            pointerEvents: control.dragstatus ? 'none' : 'auto',\r\n          }\"\r\n          :src=\"iframeUrl\"\r\n          @load=\"init\"\r\n        ></iframe>\r\n\r\n        <!-- 拖拽与iframe交互蒙层 -->\r\n        <div\r\n          class=\"page-layer\"\r\n          type=\"page\"\r\n          :style=\"{\r\n            height: iframeHeight + 'px',\r\n            zIndex: control.dragstatus ? '20' : '1',\r\n          }\"\r\n          @dragover=\"layerMove\"\r\n        >\r\n          <control-widget-shape\r\n            v-for=\"item in widgetInfoList\"\r\n            :key=\"item.id\"\r\n            :data=\"item\"\r\n            @changeCurrWidget=\"changeCurrWidget\"\r\n          >\r\n            <div\r\n              ref=\"layerWidget\"\r\n              class=\"page-layer-widget\"\r\n              type=\"widget\"\r\n              :id=\"item.id\"\r\n              :style=\"{ height: item.height + 'px' }\"\r\n            ></div>\r\n          </control-widget-shape>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 页面设置 -->\r\n      <el-tooltip effect=\"light\" content=\"页面设置\" placement=\"bottom\">\r\n        <div\r\n          class=\"panel-set flex-center\"\r\n          @click=\"control.curWidget = undefined\"\r\n        >\r\n          <i class=\"el-icon-setting\"></i>\r\n        </div>\r\n      </el-tooltip>\r\n    </phone-ctn>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ControlWidgetShape from \"./ControlWidgetShape.vue\";\r\nimport global from \"@/config/global\";\r\nimport { mapGetters, mapMutations } from \"vuex\";\r\n\r\nexport default {\r\n  components: { ControlWidgetShape },\r\n\r\n  inject: [\"control\"],\r\n\r\n  created() {\r\n    console.log(\"创建页面\");\r\n\r\n    this.initIframe = true;\r\n  },\r\n\r\n  mounted() {\r\n    this.control.h5Iframe = this.$refs.iframe;\r\n    this.getMessage();\r\n  },\r\n\r\n  destroyed() {\r\n    console.log(\"注销页面\");\r\n\r\n    this.initIframe = false;\r\n    window.removeEventListener(\"message\",this.getMessageHandle);\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      widgetInfoList: [],\r\n      iframeHeight: 667,\r\n      initIframe: false,\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"project\"]),\r\n\r\n    iframeUrl() {\r\n      return `${global.viewUrl}pages/build/build?operate=build`;\r\n    },\r\n  },\r\n\r\n  // 监听物料列表发生变化，通知iframe同步更新\r\n  watch: {\r\n    \"control.curPage.componentList\": {\r\n      handler() {\r\n        this.messageList();\r\n      },\r\n      deep: true,\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    // 发送信息，同步初始化iframe\r\n    init() {\r\n      console.log(\"初始化...\");\r\n\r\n      this.messageInit();\r\n      this.messageList();\r\n    },\r\n\r\n    // 接收iframe信息\r\n    getMessage() {\r\n      window.addEventListener(\"message\", this.getMessageHandle);\r\n    },\r\n\r\n    getMessageHandle(e) {\r\n      let self = this;\r\n      let { type, params } = e.data;\r\n      switch (type) {\r\n        case \"setList\":\r\n          self.setList(params);\r\n          break;\r\n        case \"setHeight\":\r\n          self.setHeight(params);\r\n          break;\r\n        case \"setCurrWidget\":\r\n          self.setCurrWidget(params);\r\n          break;\r\n      }\r\n    },\r\n\r\n    // 设置页面高度\r\n    setHeight(params) {\r\n      this.widgetInfoList = params;\r\n      this.iframeHeight = this.widgetInfoList.reduce((a, b) => a + b.height, 0);\r\n      // console.log(`当前高度：${this.iframeHeight}`);\r\n    },\r\n\r\n    // iframe内物料列表发生变化，同步更新\r\n    setList(params) {\r\n      console.log(\" iframe内物料列表发生变化，同步更新\");\r\n      console.log(params);\r\n      console.log(this.control.curPage.name);\r\n\r\n      let { list } = params;\r\n      this.control.curPage.componentList = list;\r\n      console.log(this.project);\r\n    },\r\n\r\n    // 设置选中物料\r\n    setCurrWidget(params) {\r\n      let { id } = params;\r\n      this.control.curWidget = this.control.curPage.componentList.find(\r\n        (item) => id == item.id\r\n      );\r\n    },\r\n\r\n    // 修改选中物料，并通知iframe，同步更新\r\n    changeCurrWidget(widget) {\r\n      this.setCurrWidget(widget);\r\n      this.$refs.iframe.contentWindow.postMessage(\r\n        {\r\n          even: \"changeCurrWidget\",\r\n          params: { id: widget.id },\r\n        },\r\n        \"*\"\r\n      );\r\n    },\r\n\r\n    // 调用物料拖拽移动(节流)\r\n    layerMove(e, index) {\r\n      this.throttle(this.layerMoveFun, 1)(e, index);\r\n    },\r\n\r\n    // 物料拖拽移动,控制waiting移动\r\n    layerMoveFun(e) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      console.log(\"物料拖拽移动,控制waiting移动\");\r\n\r\n      if (!this.control.dragstatus) return;\r\n\r\n      let type = e.target.getAttribute(\"type\");\r\n      let params = {\r\n        type: \"page\",\r\n      };\r\n\r\n      if (type == \"widget\") {\r\n        let [y, h] = [e.offsetY, e.target.offsetHeight];\r\n        params = {\r\n          id: e.target.getAttribute(\"id\"),\r\n          type: \"widget\",\r\n          direction: y < h / 2,\r\n        };\r\n      }\r\n\r\n      this.$refs.iframe.contentWindow.postMessage(\r\n        {\r\n          even: \"move\",\r\n          params,\r\n        },\r\n        \"*\"\r\n      );\r\n    },\r\n\r\n    // 发送信息，当前商城配置数据\r\n    messageInit() {\r\n      this.$refs.iframe.contentWindow.postMessage(\r\n        {\r\n          even: \"init\",\r\n          params: { project: this.project },\r\n        },\r\n        \"*\"\r\n      );\r\n    },\r\n\r\n    // 发送信息，同步iframe种物料数组\r\n    messageList() {\r\n      console.log(\"发送信息，同步iframe种物料数组\");\r\n      console.log(this.control.curPage);\r\n\r\n      console.log(this.control.curPage.componentList);\r\n\r\n      this.$refs.iframe.contentWindow.postMessage(\r\n        {\r\n          even: \"list\",\r\n          params: this.control.curPage.componentList,\r\n        },\r\n        \"*\"\r\n      );\r\n    },\r\n\r\n    // 节流\r\n    throttle(func, wait) {\r\n      let timeout;\r\n      return function () {\r\n        let context = this;\r\n        let args = arguments;\r\n        if (!timeout) {\r\n          timeout = setTimeout(() => {\r\n            timeout = null;\r\n            func.apply(context, args);\r\n          }, wait);\r\n        }\r\n      };\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.panel {\r\n  position: absolute;\r\n  left: 176px; /*no*/\r\n  right: 360px; /*no*/\r\n  height: calc(100% - 56px); /*no*/\r\n  overflow: auto;\r\n\r\n  &::-webkit-scrollbar {\r\n    display: none; /* Chrome Safari */\r\n  }\r\n\r\n  .panel-set {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: -70px;\r\n    width: 40px;\r\n    height: 40px;\r\n    border-radius: 50%;\r\n    background: #fff;\r\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\r\n    cursor: pointer;\r\n\r\n    i {\r\n      font-size: 22px;\r\n      color: #b0afb2;\r\n    }\r\n  }\r\n\r\n  .page {\r\n    position: relative;\r\n    font-size: 0;\r\n\r\n    .page-iframe {\r\n      position: relative;\r\n      width: 100%;\r\n      z-index: 10;\r\n    }\r\n\r\n    .page-layer {\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      min-height: 667px;\r\n      // background: cornflowerblue;\r\n\r\n      .page-layer-widget {\r\n        width: 100%;\r\n        z-index: 99999;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}