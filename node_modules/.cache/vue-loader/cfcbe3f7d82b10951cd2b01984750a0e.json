{"remainingRequest":"D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\src\\pages\\mall\\goods\\group-manager\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\src\\pages\\mall\\goods\\group-manager\\index.vue","mtime":1693619752180},{"path":"D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693619820390},{"path":"D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\node_modules\\babel-loader\\lib\\index.js","mtime":1693619820336},{"path":"D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693619820390},{"path":"D:\\开源项目\\商城低代码\\mall-cook\\packages\\mall-cook-platform\\node_modules\\vue-loader\\lib\\index.js","mtime":1693619864566}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7DQppbXBvcnQgRWRpdCBmcm9tICIuL2VkaXQudnVlIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiZ3JvdXBNYW5hZ2VyIiwNCg0KICBjb21wb25lbnRzOiB7DQogICAgRWRpdCwNCiAgfSwNCg0KICBkYXRhKCkgew0KICAgIHJldHVybiB7fTsNCiAgfSwNCg0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcEdldHRlcnMoWyJwcm9qZWN0Il0pLA0KICB9LA0KDQogIG1ldGhvZHM6IHsNCiAgICAvLyDmipjlj6ANCiAgICBmb2xkKGdyb3VwKSB7DQogICAgICBncm91cC5mb2xkDQogICAgICAgID8gdGhpcy4kc2V0KGdyb3VwLCAiZm9sZCIsIGZhbHNlKQ0KICAgICAgICA6IHRoaXMuJHNldChncm91cCwgImZvbGQiLCB0cnVlKTsNCiAgICB9LA0KDQogICAgLy8g5oqY5Y+g5YWo6YOoDQogICAgYWxsRm9sZCgpIHsNCiAgICAgIHRoaXMucHJvamVjdC5jb25maWcuZ29vZHNHcm91cHMubWFwKChpdGVtKSA9PiAoaXRlbS5mb2xkID0gZmFsc2UpKTsNCiAgICB9LA0KDQogICAgLy8g5bGV5byA5YWo6YOoDQogICAgYWxsVW5Gb2xkKCkgew0KICAgICAgdGhpcy5wcm9qZWN0LmNvbmZpZy5nb29kc0dyb3Vwcy5tYXAoKGl0ZW0pID0+IChpdGVtLmZvbGQgPSB0cnVlKSk7DQogICAgfSwNCg0KICAgIC8vIOaWsOWinuS4gOe6p+WIhue7hA0KICAgIGFkZEdyb3VwKCkgew0KICAgICAgdGhpcy4kcmVmcy5lZGl0Lm9wZW4oMSk7DQogICAgfSwNCg0KICAgIC8vIOe8lui+keS4gOe6p+WIhue7hA0KICAgIGVkaXRHcm91cChkYXRhKSB7DQogICAgICB0aGlzLiRyZWZzLmVkaXQub3BlbigxLCBkYXRhKTsNCiAgICB9LA0KDQogICAgLy8g5Yig6Zmk5LiA57qn5YiG57uEDQogICAgZGVsR3JvdXAodHlwZSkgew0KICAgICAgbGV0IGdyb3VwcyA9IHRoaXMucHJvamVjdC5jb25maWcuZ29vZHNHcm91cHM7DQogICAgICBsZXQgaW5kZXggPSBncm91cHMucmVkdWNlKChwcmUsIGN1ciwgaSkgPT4gew0KICAgICAgICBpZiAoY3VyLnR5cGUgPT0gdHlwZSkgcHJlID0gaTsNCiAgICAgICAgcmV0dXJuIHByZTsNCiAgICAgIH0sIDApOw0KICAgICAgZ3JvdXBzLnNwbGljZShpbmRleCwgMSk7DQogICAgfSwNCg0KICAgIC8vIOaWsOWinuS6jOe6p+WIhue7hA0KICAgIGFkZFR5cGUoKSB7DQogICAgICB0aGlzLiRyZWZzLmVkaXQub3BlbigyKTsNCiAgICB9LA0KDQogICAgLy8g57yW6L6R5LqM57qn5YiG57uEDQogICAgZWRpdFR5cGUoZGF0YSkgew0KICAgICAgdGhpcy4kcmVmcy5lZGl0Lm9wZW4oMiwgZGF0YSk7DQogICAgfSwNCg0KICAgIC8vIOWIoOmZpOS6jOe6p+WIhue7hA0KICAgIGRlbFR5cGUoZGF0YSkgew0KICAgICAgbGV0IHRlbXAgPSB0aGlzLnByb2plY3QuY29uZmlnLmdvb2RzR3JvdXBzLmZpbmQoDQogICAgICAgIChpdGVtKSA9PiBpdGVtLnR5cGUgPT0gZGF0YS5wYXJlbnRUeXBlDQogICAgICApOw0KICAgICAgbGV0IGluZGV4ID0gdGVtcC5jaGlsZC5yZWR1Y2UoKHByZSwgY3VyLCBpKSA9PiB7DQogICAgICAgIGlmIChjdXIudHlwZSA9PSBkYXRhLnR5cGUpIHByZSA9IGk7DQogICAgICAgIHJldHVybiBwcmU7DQogICAgICB9LCAwKTsNCiAgICAgIHRlbXAuY2hpbGQuc3BsaWNlKGluZGV4LCAxKTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgHA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/mall/goods/group-manager","sourcesContent":["<!--\r\n * @Description: 商品分类管理\r\n * @Autor: WangYuan\r\n * @Date: 2021-09-07 11:49:30\r\n * @LastEditors: WangYuan\r\n * @LastEditTime: 2022-02-11 11:46:31\r\n-->\r\n<template>\r\n  <div class=\"m20 p20 bg-white\">\r\n    <div class=\"mt10 mb20\">\r\n      <span class=\"mr20 f14\">商品分组</span>\r\n      <span class=\"f12 f-grey\">拖拽可调整分组顺序，保存生效</span>\r\n    </div>\r\n\r\n    <div class=\"p10 bg-grey\">\r\n\r\n      <!-- 按钮栏 -->\r\n      <div class=\"flex row-between p15 r8 bg-white\">\r\n        <div>\r\n          <el-button\r\n            class=\"mr10\"\r\n            size=\"small\"\r\n            @click=\"allUnFold\"\r\n          >展开全部</el-button>\r\n          <el-button\r\n            size=\"small\"\r\n            @click=\"allFold\"\r\n          >折叠全部</el-button>\r\n        </div>\r\n        <el-button\r\n          size=\"small\"\r\n          @click=\"addGroup\"\r\n        >新增一级分组</el-button>\r\n      </div>\r\n\r\n      <!-- 分组拖拽列表 -->\r\n      <draggable v-model=\"project.config.goodsGroups\">\r\n        <div\r\n          v-for=\"group in project.config.goodsGroups\"\r\n          :key=\"group.type\"\r\n          class=\"group mt10 p10 bg-white\"\r\n        >\r\n\r\n          <!-- 分组头部 -->\r\n          <div class=\"group-head flex row-between col-center p15\">\r\n            <div>\r\n              <i\r\n                v-if=\"!group.fold\"\r\n                class=\"el-icon-arrow-right f14 mr10 pointer\"\r\n                @click=\"fold(group)\"\r\n              ></i>\r\n              <i\r\n                v-else\r\n                class=\"el-icon-arrow-down f14 mr10 pointer\"\r\n                @click=\"fold(group)\"\r\n              ></i>\r\n              <span class=\"f12\">{{group.name}}</span>\r\n            </div>\r\n            <div class=\"f-theme f12\">\r\n              <span\r\n                class=\"mr10 pointer\"\r\n                @click=\"addType\"\r\n              >新增二级分组</span>\r\n              <span\r\n                class=\"mr10 pointer\"\r\n                @click=\"editGroup(group)\"\r\n              >编辑</span>\r\n              <span\r\n                class=\"mr10 pointer\"\r\n                @click=\"delGroup(group.type)\"\r\n              >删除</span>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 分组内容 -->\r\n          <ul\r\n            v-if=\"group.child.length && group.fold\"\r\n            class=\"group-body\"\r\n          >\r\n            <li\r\n              v-for=\"item in group.child\"\r\n              :key=\"item.type\"\r\n              class=\"group-body-item\"\r\n            >\r\n              <div class=\"flex-center\">\r\n                <img\r\n                class=\"w35 h35 mr15\"\r\n                  :src=\"item.image\"\r\n                />\r\n                <span>{{item.name}}</span>\r\n              </div>\r\n              <div class=\"f-theme f12\">\r\n                <span\r\n                  class=\"mr10 pointer\"\r\n                  @click=\"editType(item)\"\r\n                >编辑</span>\r\n                <span\r\n                  class=\"pointer\"\r\n                  @click=\"delType(item)\"\r\n                >删除</span>\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </draggable>\r\n    </div>\r\n\r\n    <edit ref=\"edit\"></edit>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport Edit from \"./edit.vue\";\r\n\r\nexport default {\r\n  name: \"groupManager\",\r\n\r\n  components: {\r\n    Edit,\r\n  },\r\n\r\n  data() {\r\n    return {};\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"project\"]),\r\n  },\r\n\r\n  methods: {\r\n    // 折叠\r\n    fold(group) {\r\n      group.fold\r\n        ? this.$set(group, \"fold\", false)\r\n        : this.$set(group, \"fold\", true);\r\n    },\r\n\r\n    // 折叠全部\r\n    allFold() {\r\n      this.project.config.goodsGroups.map((item) => (item.fold = false));\r\n    },\r\n\r\n    // 展开全部\r\n    allUnFold() {\r\n      this.project.config.goodsGroups.map((item) => (item.fold = true));\r\n    },\r\n\r\n    // 新增一级分组\r\n    addGroup() {\r\n      this.$refs.edit.open(1);\r\n    },\r\n\r\n    // 编辑一级分组\r\n    editGroup(data) {\r\n      this.$refs.edit.open(1, data);\r\n    },\r\n\r\n    // 删除一级分组\r\n    delGroup(type) {\r\n      let groups = this.project.config.goodsGroups;\r\n      let index = groups.reduce((pre, cur, i) => {\r\n        if (cur.type == type) pre = i;\r\n        return pre;\r\n      }, 0);\r\n      groups.splice(index, 1);\r\n    },\r\n\r\n    // 新增二级分组\r\n    addType() {\r\n      this.$refs.edit.open(2);\r\n    },\r\n\r\n    // 编辑二级分组\r\n    editType(data) {\r\n      this.$refs.edit.open(2, data);\r\n    },\r\n\r\n    // 删除二级分组\r\n    delType(data) {\r\n      let temp = this.project.config.goodsGroups.find(\r\n        (item) => item.type == data.parentType\r\n      );\r\n      let index = temp.child.reduce((pre, cur, i) => {\r\n        if (cur.type == data.type) pre = i;\r\n        return pre;\r\n      }, 0);\r\n      temp.child.splice(index, 1);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.group {\r\n  .group-head {\r\n    border: 1px solid #e3e2e5;\r\n    border-top-left-radius: 10px;\r\n    border-top-right-radius: 10px;\r\n  }\r\n\r\n  .group-body {\r\n    padding: 5px 15px 5px 50px;\r\n    border-left: 1px solid #e3e2e5;\r\n    border-right: 1px solid #e3e2e5;\r\n    border-bottom: 1px solid #e3e2e5;\r\n    border-bottom-left-radius: 6px;\r\n    border-bottom-right-radius: 6px;\r\n    font-size: 13px;\r\n\r\n    .group-body-item {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      padding: 10px 10px 10px 0;\r\n      border-bottom: 1px solid #e3e2e5;\r\n\r\n      &:last-child {\r\n        border: 0;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}