{"remainingRequest":"D:\\开源项目\\Tooy-LowCode\\lowCode\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\开源项目\\Tooy-LowCode\\lowCode\\src\\components\\ModelsList\\index.vue?vue&type=style&index=0&id=49f6f4db&lang=scss&scoped=true&","dependencies":[{"path":"D:\\开源项目\\Tooy-LowCode\\lowCode\\src\\components\\ModelsList\\index.vue","mtime":1693619752154},{"path":"D:\\开源项目\\Tooy-LowCode\\lowCode\\node_modules\\css-loader\\dist\\cjs.js","mtime":1693619861603},{"path":"D:\\开源项目\\Tooy-LowCode\\lowCode\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1693619864566},{"path":"D:\\开源项目\\Tooy-LowCode\\lowCode\\node_modules\\px2rem-loader\\index.js","mtime":1693619901908},{"path":"D:\\开源项目\\Tooy-LowCode\\lowCode\\node_modules\\postcss-loader\\src\\index.js","mtime":1693619864324},{"path":"D:\\开源项目\\Tooy-LowCode\\lowCode\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1693619903311},{"path":"D:\\开源项目\\Tooy-LowCode\\lowCode\\node_modules\\sass-resources-loader\\lib\\loader.js","mtime":1693619810749},{"path":"D:\\开源项目\\Tooy-LowCode\\lowCode\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693619820390},{"path":"D:\\开源项目\\Tooy-LowCode\\lowCode\\node_modules\\vue-loader\\lib\\index.js","mtime":1693619864566}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCjo6di1kZWVwIC5lbC1idXR0b24gew0KICBiYWNrZ3JvdW5kOiAkY29sb3ItdGhlbWU7DQp9DQoNCi5lbC10YWcgew0KICBjb2xvcjogJGNvbG9yLXRoZW1lOw0KICBib3JkZXItY29sb3I6ICRjb2xvci10aGVtZTsNCn0NCg0KLndyYXAgew0KICBtYXJnaW4tdG9wOiAyMHB4Ow0KDQogIC53cmFwLWhlYWQgew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgbWFyZ2luLWJvdHRvbTogMTBweDsNCg0KICAgIC53cmFwLWhlYWQtaXRlbSB7DQogICAgICBwYWRkaW5nOiA4cHggMTJweDsNCiAgICAgIG1hcmdpbjogMCA4cHggOHB4IDA7DQogICAgICBiYWNrZ3JvdW5kOiAjZjJmMmY2Ow0KICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgZm9udC1zaXplOiAxMnB4Ow0KICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgIH0NCg0KICAgIC53cmFwLWhlYWQtYWN0aXZlIHsNCiAgICAgIGNvbG9yOiAkY29sb3ItdGhlbWU7DQogICAgICBiYWNrZ3JvdW5kOiByZ2JhKDM3LCAxMzcsIDI1NSwgMC4xKTsNCiAgICB9DQogIH0NCg0KICAud3JhcC1saXN0IHsNCiAgICBoZWlnaHQ6IDc1dmg7DQogICAgb3ZlcmZsb3c6IGF1dG87DQoNCiAgICAubW9kZWwgew0KICAgICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICAgICAgd2lkdGg6IDIyMHB4Ow0KICAgICAgbWF4LWhlaWdodDogMzgwcHg7DQogICAgICBtYXJnaW46IDAgMjBweCAyMHB4IDA7DQogICAgICBib3JkZXI6IDFweCBzb2xpZCAjZTllOWU5Ow0KICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICAgIGN1cnNvcjogcG9pbnRlcjsNCg0KICAgICAgLm1vZGVsLWltZyB7DQogICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICBtaW4taGVpZ2h0OiA0MDBweDsNCiAgICAgIH0NCg0KICAgICAgLm1vZGVsLWRlc2Mgew0KICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgIGxlZnQ6IDA7DQogICAgICAgIGJvdHRvbTogLTMwcHg7DQogICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICBoZWlnaHQ6IDkwcHg7DQogICAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICAgIGJhY2tncm91bmQ6IGhzbGEoMCwgMCUsIDEwMCUsIDAuOTUpOw0KICAgICAgICBmb250LXNpemU6IDEycHg7DQogICAgICAgIGNvbG9yOiAjMzMzOw0KICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4zczsNCiAgICAgICAgei1pbmRleDogMTA7DQogICAgICB9DQoNCiAgICAgIC5tb2RlbC1xciB7DQogICAgICAgIGRpc3BsYXk6IG5vbmU7DQogICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgdG9wOiAyMCU7DQogICAgICAgIGxlZnQ6IDUwJTsNCiAgICAgICAgd2lkdGg6IDExMHB4Ow0KICAgICAgICBwYWRkaW5nOiAxMHB4Ow0KICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7DQogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsNCiAgICAgICAgYmFja2dyb3VuZDogI2ZmZjsNCiAgICAgICAgZm9udC1zaXplOiAxMnB4Ow0KICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgIGNvbG9yOiAjNTk1OTYxOw0KICAgICAgICB6LWluZGV4OiAxMDsNCiAgICAgIH0NCg0KICAgICAgLm1vZGVsLWJ0biB7DQogICAgICAgIGRpc3BsYXk6IG5vbmU7DQogICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgdG9wOiA1NiU7DQogICAgICAgIGxlZnQ6IDUwJTsNCiAgICAgICAgd2lkdGg6IDExMHB4Ow0KICAgICAgICBoZWlnaHQ6IDI4cHg7DQogICAgICAgIGxpbmUtaGVpZ2h0OiAyOHB4Ow0KICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsNCiAgICAgICAgYmFja2dyb3VuZDogJGNvbG9yLXRoZW1lOw0KICAgICAgICBmb250LXNpemU6IDEycHg7DQogICAgICAgIGNvbG9yOiAjZmZmOw0KICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgIHotaW5kZXg6IDEwOw0KICAgICAgfQ0KDQogICAgICAmOmhvdmVyIHsNCiAgICAgICAgJjo6YWZ0ZXIgew0KICAgICAgICAgIGNvbnRlbnQ6ICIiOw0KICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICB0b3A6IDA7DQogICAgICAgICAgbGVmdDogMDsNCiAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICBoZWlnaHQ6IDEwMCU7DQogICAgICAgICAgYmFja2dyb3VuZDogIzY4NjU2NTMwOw0KICAgICAgICAgIHotaW5kZXg6IDE7DQogICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuM3M7DQogICAgICAgIH0NCg0KICAgICAgICAubW9kZWwtZGVzYyB7DQogICAgICAgICAgYm90dG9tOiAwcHg7DQogICAgICAgIH0NCg0KICAgICAgICAubW9kZWwtYnRuLA0KICAgICAgICAubW9kZWwtcXIgew0KICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuLA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/ModelsList","sourcesContent":["<!--\r\n * @Description: 模板商城\r\n * @Autor: WangYuan\r\n * @Date: 2021-09-28 17:23:56\r\n * @LastEditors: WangYuan\r\n * @LastEditTime: 2022-05-10 11:38:12\r\n-->\r\n<template>\r\n  <div>\r\n    <div class=\"wrap\">\r\n      <!-- 行业分类 -->\r\n      <ul class=\"wrap-head\">\r\n        <li\r\n          v-for=\"(item, index) in industryList\"\r\n          :key=\"index\"\r\n          class=\"wrap-head-item\"\r\n          :class=\"[item.value == industry ? 'wrap-head-active' : '']\"\r\n          @click=\"industry = item.value\"\r\n        >\r\n          {{ item.label }}\r\n        </li>\r\n      </ul>\r\n      <!-- 模板列表 -->\r\n      <div v-loading=\"loading\">\r\n        <ul v-if=\"list.length\" class=\"wrap-list\">\r\n          <li v-for=\"model in list\" :key=\"model.id\" class=\"model\">\r\n            <template>\r\n              <img class=\"model-img\" :src=\"model.cover\" />\r\n              <div class=\"model-desc\">\r\n                <h3 class=\"mt5 f14\">{{ model.name }}</h3>\r\n                <!-- <div class=\"mt10 f12 f-grey\">设计师：{{ userInfo.userName }}</div> -->\r\n                <el-tag effect=\"plain\" size=\"mini\" class=\"mt5\">{{\r\n                  getlIndustryName(model.industry)\r\n                }}</el-tag>\r\n              </div>\r\n            </template>\r\n\r\n            <template>\r\n              <div class=\"model-qr\">\r\n                <img class=\"w90 mb5\" :src=\"getQr(model.id)\" />\r\n                <span>扫码预览</span>\r\n              </div>\r\n\r\n              <span class=\"model-btn\" @click=\"useModel(model)\">使用模板</span>\r\n            </template>\r\n          </li>\r\n\r\n          <li style=\"text-align: center;margin-top: 20px;\">\r\n            <el-pagination\r\n              background\r\n              :page-size=\"paginationForm.pageSize\"\r\n              layout=\"total, prev, pager, next\"\r\n              :total=\"paginationForm.total\"\r\n              @current-change=\"handleCurrentChange\"\r\n            />\r\n          </li>\r\n        </ul>\r\n\r\n        <!-- 空列表 -->\r\n        <el-empty v-else class=\"mt80\">\r\n          <template slot=\"description\">\r\n            <span class=\"f13 f-grey\">{{ `没有此类型模板哦` }}</span>\r\n          </template>\r\n        </el-empty>\r\n      </div>\r\n\r\n    </div>\r\n\r\n    \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapMutations } from \"vuex\";\r\nimport { getModelList,getProjectById } from \"@/api/project\";\r\nimport { mallIndustryList, mallTypeList } from \"@/config/mall\";\r\nimport global from \"@/config/global\";\r\n\r\nexport default {\r\n  created() {\r\n    this.getlIndustryName();\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      industry: \"\",\r\n      list: [],\r\n      industryList: [{ label: \"全部\", value: \"\" }, ...mallIndustryList],\r\n      paginationForm: {\r\n        page: 1,\r\n        total: 0,\r\n        pageSize: 10\r\n      }\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"project\", \"userInfo\"]),\r\n  },\r\n\r\n  watch: {\r\n    industry: {\r\n      immediate: true,\r\n      handler() {\r\n        this.getModelList();\r\n      },\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    ...mapMutations([\"setProject\"]),\r\n\r\n    // 模板商城暂时只展示自己的\r\n    async getModelList() {\r\n      this.loading = true;\r\n      let { list, totalCount } = await getModelList({\r\n        industry: this.industry,\r\n        pagination: this.paginationForm,\r\n      });\r\n      this.list = list;\r\n      this.$set(this.paginationForm, \"total\", totalCount);\r\n      // this.list = list.filter(\r\n      //   (item) => item.userId == \"618d141848f2514904ebd07e\"\r\n      // );\r\n      this.loading = false;\r\n    },\r\n\r\n    getlIndustryName(target) {\r\n      let industryMap = mallIndustryList.reduce((pre, cur) => {\r\n        pre.set(cur.value, cur.label);\r\n        return pre;\r\n      }, new Map());\r\n\r\n      return industryMap.get(target);\r\n    },\r\n\r\n    async useModel(model) {\r\n      let {data} =  await getProjectById({id:model.id})\r\n      let { _id, id, name, userId } = this.project;\r\n\r\n      let map = new Map();\r\n      mallTypeList.map((item) => map.set(item.type, item.logo));\r\n\r\n      // 模板上配置相关商城数据\r\n      let mall = {\r\n        ...this.$cloneDeep(data),\r\n        ...{ _id, id, name, userId, type: \"mall\", logo: map.get(\"mall\") },\r\n      };\r\n\r\n      this.setProject(mall);\r\n      this.$router.push({ name: \"page-build\" });\r\n\r\n      this.$message({\r\n        type: \"success\",\r\n        message: \"已使用选中模板!\",\r\n      });\r\n    },\r\n\r\n    getQr(id) {\r\n      let url = `${global.viewUrl}pages/index/tabbar/home?id=${id}`;\r\n\r\n      let options = {\r\n        padding: 0, // 二维码四边空白（默认为10px）\r\n        width: 180, // 二维码图片宽度（默认为256px）\r\n        height: 180, // 二维码图片高度（默认为256px）\r\n        reverse: false, // 反色二维码，二维码颜色为上层容器的背景颜色\r\n        background: \"#ffffff\", // 二维码背景颜色（默认白色）\r\n        foreground: \"#000000\", // 二维码颜色（默认黑色）\r\n      };\r\n      console.log(\"预览地址1:\" + url);\r\n      return jrQrcode.getQrBase64(url, options);\r\n    },\r\n\r\n    handleCurrentChange(p) {\r\n      this.$set(this.paginationForm, \"page\", p);\r\n      this.getModelList();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n::v-deep .el-button {\r\n  background: $color-theme;\r\n}\r\n\r\n.el-tag {\r\n  color: $color-theme;\r\n  border-color: $color-theme;\r\n}\r\n\r\n.wrap {\r\n  margin-top: 20px;\r\n\r\n  .wrap-head {\r\n    display: flex;\r\n    margin-bottom: 10px;\r\n\r\n    .wrap-head-item {\r\n      padding: 8px 12px;\r\n      margin: 0 8px 8px 0;\r\n      background: #f2f2f6;\r\n      border-radius: 4px;\r\n      font-size: 12px;\r\n      text-align: center;\r\n      cursor: pointer;\r\n    }\r\n\r\n    .wrap-head-active {\r\n      color: $color-theme;\r\n      background: rgba(37, 137, 255, 0.1);\r\n    }\r\n  }\r\n\r\n  .wrap-list {\r\n    height: 75vh;\r\n    overflow: auto;\r\n\r\n    .model {\r\n      position: relative;\r\n      display: inline-block;\r\n      width: 220px;\r\n      max-height: 380px;\r\n      margin: 0 20px 20px 0;\r\n      border: 1px solid #e9e9e9;\r\n      border-radius: 4px;\r\n      overflow: hidden;\r\n      cursor: pointer;\r\n\r\n      .model-img {\r\n        width: 100%;\r\n        min-height: 400px;\r\n      }\r\n\r\n      .model-desc {\r\n        position: absolute;\r\n        left: 0;\r\n        bottom: -30px;\r\n        width: 100%;\r\n        height: 90px;\r\n        padding: 10px;\r\n        background: hsla(0, 0%, 100%, 0.95);\r\n        font-size: 12px;\r\n        color: #333;\r\n        transition: all 0.3s;\r\n        z-index: 10;\r\n      }\r\n\r\n      .model-qr {\r\n        display: none;\r\n        position: absolute;\r\n        top: 20%;\r\n        left: 50%;\r\n        width: 110px;\r\n        padding: 10px;\r\n        border-radius: 6px;\r\n        transform: translateX(-50%);\r\n        background: #fff;\r\n        font-size: 12px;\r\n        text-align: center;\r\n        color: #595961;\r\n        z-index: 10;\r\n      }\r\n\r\n      .model-btn {\r\n        display: none;\r\n        position: absolute;\r\n        top: 56%;\r\n        left: 50%;\r\n        width: 110px;\r\n        height: 28px;\r\n        line-height: 28px;\r\n        border-radius: 4px;\r\n        transform: translateX(-50%);\r\n        background: $color-theme;\r\n        font-size: 12px;\r\n        color: #fff;\r\n        text-align: center;\r\n        z-index: 10;\r\n      }\r\n\r\n      &:hover {\r\n        &::after {\r\n          content: \"\";\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          width: 100%;\r\n          height: 100%;\r\n          background: #68656530;\r\n          z-index: 1;\r\n          transition: all 0.3s;\r\n        }\r\n\r\n        .model-desc {\r\n          bottom: 0px;\r\n        }\r\n\r\n        .model-btn,\r\n        .model-qr {\r\n          display: inline-block;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}