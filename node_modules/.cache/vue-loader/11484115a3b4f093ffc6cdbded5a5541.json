{"remainingRequest":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\src\\components\\ModelsList\\index.vue?vue&type=style&index=0&id=49f6f4db&lang=scss&scoped=true&","dependencies":[{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\src\\components\\ModelsList\\index.vue","mtime":1694430222335},{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\css-loader\\dist\\cjs.js","mtime":1693619861603},{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1693619864566},{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\px2rem-loader\\index.js","mtime":1693619901908},{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\postcss-loader\\src\\index.js","mtime":1693619864324},{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1693619903311},{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\sass-resources-loader\\lib\\loader.js","mtime":1693619810749},{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693619820390},{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\vue-loader\\lib\\index.js","mtime":1693619864566}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KOjp2LWRlZXAgLmVsLWJ1dHRvbiB7DQogIGJhY2tncm91bmQ6ICRjb2xvci10aGVtZTsNCn0NCg0KLmVsLXRhZyB7DQogIGNvbG9yOiAkY29sb3ItdGhlbWU7DQogIGJvcmRlci1jb2xvcjogJGNvbG9yLXRoZW1lOw0KfQ0KDQoud3JhcCB7DQogIG1hcmdpbi10b3A6IDIwcHg7DQoNCiAgLndyYXAtaGVhZCB7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBtYXJnaW4tYm90dG9tOiAxMHB4Ow0KDQogICAgLndyYXAtaGVhZC1pdGVtIHsNCiAgICAgIHBhZGRpbmc6IDhweCAxMnB4Ow0KICAgICAgbWFyZ2luOiAwIDhweCA4cHggMDsNCiAgICAgIGJhY2tncm91bmQ6ICNmMmYyZjY7DQogICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICBmb250LXNpemU6IDEycHg7DQogICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgfQ0KDQogICAgLndyYXAtaGVhZC1hY3RpdmUgew0KICAgICAgY29sb3I6ICRjb2xvci10aGVtZTsNCiAgICAgIGJhY2tncm91bmQ6IHJnYmEoMzcsIDEzNywgMjU1LCAwLjEpOw0KICAgIH0NCiAgfQ0KDQogIC53cmFwLWxpc3Qgew0KICAgIGhlaWdodDogNzV2aDsNCiAgICBvdmVyZmxvdzogYXV0bzsNCg0KICAgIC5tb2RlbCB7DQogICAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogICAgICB3aWR0aDogMjIwcHg7DQogICAgICBtYXgtaGVpZ2h0OiAzODBweDsNCiAgICAgIG1hcmdpbjogMCAyMHB4IDIwcHggMDsNCiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlOWU5ZTk7DQogICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgICAgY3Vyc29yOiBwb2ludGVyOw0KDQogICAgICAubW9kZWwtaW1nIHsNCiAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgIG1pbi1oZWlnaHQ6IDQwMHB4Ow0KICAgICAgfQ0KDQogICAgICAubW9kZWwtZGVzYyB7DQogICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgbGVmdDogMDsNCiAgICAgICAgYm90dG9tOiAtMzBweDsNCiAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgIGhlaWdodDogOTBweDsNCiAgICAgICAgcGFkZGluZzogMTBweDsNCiAgICAgICAgYmFja2dyb3VuZDogaHNsYSgwLCAwJSwgMTAwJSwgMC45NSk7DQogICAgICAgIGZvbnQtc2l6ZTogMTJweDsNCiAgICAgICAgY29sb3I6ICMzMzM7DQogICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjNzOw0KICAgICAgICB6LWluZGV4OiAxMDsNCiAgICAgIH0NCg0KICAgICAgLm1vZGVsLXFyIHsNCiAgICAgICAgZGlzcGxheTogbm9uZTsNCiAgICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgICB0b3A6IDIwJTsNCiAgICAgICAgbGVmdDogNTAlOw0KICAgICAgICB3aWR0aDogMTEwcHg7DQogICAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDsNCiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOw0KICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmOw0KICAgICAgICBmb250LXNpemU6IDEycHg7DQogICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgY29sb3I6ICM1OTU5NjE7DQogICAgICAgIHotaW5kZXg6IDEwOw0KICAgICAgfQ0KDQogICAgICAubW9kZWwtYnRuIHsNCiAgICAgICAgZGlzcGxheTogbm9uZTsNCiAgICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgICB0b3A6IDU2JTsNCiAgICAgICAgbGVmdDogNTAlOw0KICAgICAgICB3aWR0aDogMTEwcHg7DQogICAgICAgIGhlaWdodDogMjhweDsNCiAgICAgICAgbGluZS1oZWlnaHQ6IDI4cHg7DQogICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOw0KICAgICAgICBiYWNrZ3JvdW5kOiAkY29sb3ItdGhlbWU7DQogICAgICAgIGZvbnQtc2l6ZTogMTJweDsNCiAgICAgICAgY29sb3I6ICNmZmY7DQogICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgei1pbmRleDogMTA7DQogICAgICB9DQoNCiAgICAgICY6aG92ZXIgew0KICAgICAgICAmOjphZnRlciB7DQogICAgICAgICAgY29udGVudDogIiI7DQogICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgICAgIHRvcDogMDsNCiAgICAgICAgICBsZWZ0OiAwOw0KICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgICAgICBiYWNrZ3JvdW5kOiAjNjg2NTY1MzA7DQogICAgICAgICAgei1pbmRleDogMTsNCiAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4zczsNCiAgICAgICAgfQ0KDQogICAgICAgIC5tb2RlbC1kZXNjIHsNCiAgICAgICAgICBib3R0b206IDBweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5tb2RlbC1idG4sDQogICAgICAgIC5tb2RlbC1xciB7DQogICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0KA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/ModelsList","sourcesContent":["<!--\r\n * @Description: 模板商城\r\n\r\n-->\r\n<template>\r\n  <div>\r\n    <div class=\"wrap\">\r\n      <!-- 行业分类 -->\r\n      <ul class=\"wrap-head\">\r\n        <li v-for=\"(item, index) in industryList\" :key=\"index\" class=\"wrap-head-item\"\r\n          :class=\"[item.value == industry ? 'wrap-head-active' : '']\" @click=\"industry = item.value\">\r\n          {{ item.label }}\r\n        </li>\r\n      </ul>\r\n      <!-- 模板列表 -->\r\n      <div v-loading=\"loading\">\r\n        <ul v-if=\"list.length\" class=\"wrap-list\">\r\n          <li v-for=\"model in list\" :key=\"model.id\" class=\"model\">\r\n            <template>\r\n              <img class=\"model-img\" :src=\"model.cover\" />\r\n              <div class=\"model-desc\">\r\n                <h3 class=\"mt5 f14\">{{ model.name }}</h3>\r\n                <!-- <div class=\"mt10 f12 f-grey\">设计师：{{ userInfo.userName }}</div> -->\r\n                <el-tag effect=\"plain\" size=\"mini\" class=\"mt5\">{{\r\n                  getlIndustryName(model.industry)\r\n                }}</el-tag>\r\n              </div>\r\n            </template>\r\n\r\n            <template>\r\n              <div class=\"model-qr\">\r\n                <img class=\"w90 mb5\" :src=\"getQr(model.id)\" />\r\n                <span>扫码预览</span>\r\n              </div>\r\n\r\n              <span class=\"model-btn\" @click=\"useModel(model)\">使用模板</span>\r\n            </template>\r\n          </li>\r\n\r\n          <li style=\"text-align: center;margin-top: 20px;\">\r\n            <el-pagination background :page-size=\"paginationForm.pageSize\" layout=\"total, prev, pager, next\"\r\n              :total=\"paginationForm.total\" @current-change=\"handleCurrentChange\" />\r\n          </li>\r\n        </ul>\r\n\r\n        <!-- 空列表 -->\r\n        <el-empty v-else class=\"mt80\">\r\n          <template slot=\"description\">\r\n            <span class=\"f13 f-grey\">{{ `没有此类型模板哦` }}</span>\r\n          </template>\r\n        </el-empty>\r\n      </div>\r\n\r\n    </div>\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapMutations } from \"vuex\";\r\nimport { getModelList, getProjectById } from \"@/api/project\";\r\nimport { mallIndustryList, mallTypeList } from \"@/config/mall\";\r\nimport global from \"@/config/global\";\r\n\r\nexport default {\r\n  created() {\r\n    this.getlIndustryName();\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      industry: \"\",\r\n      list: [],\r\n      industryList: [{ label: \"全部\", value: \"\" }, ...mallIndustryList],\r\n      paginationForm: {\r\n        page: 1,\r\n        total: 0,\r\n        pageSize: 10\r\n      }\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"project\", \"userInfo\"]),\r\n  },\r\n\r\n  watch: {\r\n    industry: {\r\n      immediate: true,\r\n      handler() {\r\n        this.getModelList();\r\n      },\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    ...mapMutations([\"setProject\"]),\r\n\r\n    // 模板商城暂时只展示自己的\r\n    async getModelList() {\r\n      this.loading = true;\r\n      let { list, totalCount } = await getModelList({\r\n        industry: this.industry,\r\n        pagination: this.paginationForm,\r\n      });\r\n      this.list = list;\r\n      this.$set(this.paginationForm, \"total\", totalCount);\r\n      // this.list = list.filter(\r\n      //   (item) => item.userId == \"618d141848f2514904ebd07e\"\r\n      // );\r\n      this.loading = false;\r\n    },\r\n\r\n    getlIndustryName(target) {\r\n      let industryMap = mallIndustryList.reduce((pre, cur) => {\r\n        pre.set(cur.value, cur.label);\r\n        return pre;\r\n      }, new Map());\r\n\r\n      return industryMap.get(target);\r\n    },\r\n\r\n    async useModel(model) {\r\n      let { data } = await getProjectById({ id: model.id })\r\n      let { _id, id, name, userId } = this.project;\r\n\r\n      let map = new Map();\r\n      mallTypeList.map((item) => map.set(item.type, item.logo));\r\n\r\n      // 模板上配置相关商城数据\r\n      let mall = {\r\n        ...this.$cloneDeep(data),\r\n        ...{ _id, id, name, userId, type: \"mall\", logo: map.get(\"mall\") },\r\n      };\r\n\r\n      this.setProject(mall);\r\n      this.$router.push({ name: \"page-build\" });\r\n\r\n      this.$message({\r\n        type: \"success\",\r\n        message: \"已使用选中模板!\",\r\n      });\r\n    },\r\n\r\n    getQr(id) {\r\n      let url = `${global.viewUrl}pages/index/tabbar/home?id=${id}`;\r\n\r\n      let options = {\r\n        padding: 0, // 二维码四边空白（默认为10px）\r\n        width: 180, // 二维码图片宽度（默认为256px）\r\n        height: 180, // 二维码图片高度（默认为256px）\r\n        reverse: false, // 反色二维码，二维码颜色为上层容器的背景颜色\r\n        background: \"#ffffff\", // 二维码背景颜色（默认白色）\r\n        foreground: \"#000000\", // 二维码颜色（默认黑色）\r\n      };\r\n      console.log(\"预览地址1:\" + url);\r\n      return jrQrcode.getQrBase64(url, options);\r\n    },\r\n\r\n    handleCurrentChange(p) {\r\n      this.$set(this.paginationForm, \"page\", p);\r\n      this.getModelList();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n::v-deep .el-button {\r\n  background: $color-theme;\r\n}\r\n\r\n.el-tag {\r\n  color: $color-theme;\r\n  border-color: $color-theme;\r\n}\r\n\r\n.wrap {\r\n  margin-top: 20px;\r\n\r\n  .wrap-head {\r\n    display: flex;\r\n    margin-bottom: 10px;\r\n\r\n    .wrap-head-item {\r\n      padding: 8px 12px;\r\n      margin: 0 8px 8px 0;\r\n      background: #f2f2f6;\r\n      border-radius: 4px;\r\n      font-size: 12px;\r\n      text-align: center;\r\n      cursor: pointer;\r\n    }\r\n\r\n    .wrap-head-active {\r\n      color: $color-theme;\r\n      background: rgba(37, 137, 255, 0.1);\r\n    }\r\n  }\r\n\r\n  .wrap-list {\r\n    height: 75vh;\r\n    overflow: auto;\r\n\r\n    .model {\r\n      position: relative;\r\n      display: inline-block;\r\n      width: 220px;\r\n      max-height: 380px;\r\n      margin: 0 20px 20px 0;\r\n      border: 1px solid #e9e9e9;\r\n      border-radius: 4px;\r\n      overflow: hidden;\r\n      cursor: pointer;\r\n\r\n      .model-img {\r\n        width: 100%;\r\n        min-height: 400px;\r\n      }\r\n\r\n      .model-desc {\r\n        position: absolute;\r\n        left: 0;\r\n        bottom: -30px;\r\n        width: 100%;\r\n        height: 90px;\r\n        padding: 10px;\r\n        background: hsla(0, 0%, 100%, 0.95);\r\n        font-size: 12px;\r\n        color: #333;\r\n        transition: all 0.3s;\r\n        z-index: 10;\r\n      }\r\n\r\n      .model-qr {\r\n        display: none;\r\n        position: absolute;\r\n        top: 20%;\r\n        left: 50%;\r\n        width: 110px;\r\n        padding: 10px;\r\n        border-radius: 6px;\r\n        transform: translateX(-50%);\r\n        background: #fff;\r\n        font-size: 12px;\r\n        text-align: center;\r\n        color: #595961;\r\n        z-index: 10;\r\n      }\r\n\r\n      .model-btn {\r\n        display: none;\r\n        position: absolute;\r\n        top: 56%;\r\n        left: 50%;\r\n        width: 110px;\r\n        height: 28px;\r\n        line-height: 28px;\r\n        border-radius: 4px;\r\n        transform: translateX(-50%);\r\n        background: $color-theme;\r\n        font-size: 12px;\r\n        color: #fff;\r\n        text-align: center;\r\n        z-index: 10;\r\n      }\r\n\r\n      &:hover {\r\n        &::after {\r\n          content: \"\";\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          width: 100%;\r\n          height: 100%;\r\n          background: #68656530;\r\n          z-index: 1;\r\n          transition: all 0.3s;\r\n        }\r\n\r\n        .model-desc {\r\n          bottom: 0px;\r\n        }\r\n\r\n        .model-btn,\r\n        .model-qr {\r\n          display: inline-block;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}