{"remainingRequest":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\src\\pages\\managet.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\src\\pages\\managet.vue","mtime":1693619752183},{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693619820390},{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\babel-loader\\lib\\index.js","mtime":1693619820336},{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693619820390},{"path":"D:\\开源项目\\低代码\\Tooy-LowCode\\lowCode\\node_modules\\vue-loader\\lib\\index.js","mtime":1693619864566}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBNdXRhdGlvbnMgfSBmcm9tICJ2dWV4IjsNCmltcG9ydCB7IGdldFByb2plY3RMaXN0LCBkZWxQcm9qZWN0IH0gZnJvbSAiQC9hcGkvcHJvamVjdCI7DQppbXBvcnQgeyBtYWxsVHlwZUxpc3QgfSBmcm9tICJAL2NvbmZpZy9tYWxsIjsNCmltcG9ydCBDcmVhdGVEaWFsb2cgZnJvbSAiQC9jb21wb25lbnRzL0NyZWF0ZURpYWxvZyI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIm1hbGwtbWFuYWdldCIsDQoNCiAgY29tcG9uZW50czogew0KICAgIENyZWF0ZURpYWxvZywNCiAgfSwNCg0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuZHJvcFByb2plY3QoKTsNCiAgICB0aGlzLmdldE1hbGxMaXN0KCk7DQogIH0sDQoNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgc2hvdzogZmFsc2UsDQogICAgICBsb2FkaW5nOiBmYWxzZSwNCiAgICAgIGZvcm06IHt9LA0KICAgICAgbGlzdDogW10sDQogICAgfTsNCiAgfSwNCg0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcEdldHRlcnMoWyJwcm9qZWN0IiwgInVzZXJJbmZvIl0pLA0KICB9LA0KDQogIHdhdGNoOiB7DQogICAgc2hvdzogew0KICAgICAgaW1tZWRpYXRlOiB0cnVlLA0KICAgICAgaGFuZGxlcigpIHsNCiAgICAgICAgaWYgKCF0aGlzLnNob3cpIHRoaXMuZm9ybSA9IHt9Ow0KICAgICAgfSwNCiAgICB9LA0KICB9LA0KDQogIG1ldGhvZHM6IHsNCiAgICAuLi5tYXBNdXRhdGlvbnMoWyJkcm9wUHJvamVjdCIsICJzZXRQcm9qZWN0IiwgImxvZ291dCJdKSwNCg0KICAgIC8vIOiOt+WPluWVhuWfjuWIl+ihqA0KICAgIGFzeW5jIGdldE1hbGxMaXN0KCkgew0KICAgICAgbGV0IG1hcCA9IG5ldyBNYXAoKTsNCiAgICAgIGxldCB0ZW1wID0gbWFsbFR5cGVMaXN0Ow0KICAgICAgbWFsbFR5cGVMaXN0Lm1hcCgoaXRlbSkgPT4gew0KICAgICAgICBpdGVtLmxpc3QgPSBbXTsNCiAgICAgICAgbWFwLnNldChpdGVtLnR5cGUsIGl0ZW0ubGlzdCk7DQogICAgICB9KTsNCg0KICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAgIGxldCB7IGxpc3QgfSA9IGF3YWl0IGdldFByb2plY3RMaXN0KHsgdXNlcklkOiB0aGlzLnVzZXJJbmZvLnVzZXJJZCB9KTsNCiAgICAgIGxpc3QubWFwKChpdGVtKSA9PiB7DQogICAgICAgIGxldCB2YWx1ZSA9IG1hcC5nZXQoaXRlbS50eXBlKTsNCiAgICAgICAgdmFsdWUucHVzaChpdGVtKTsNCiAgICAgIH0pOw0KDQogICAgICB0aGlzLmxpc3QgPSB0ZW1wOw0KICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgfSwNCg0KICAgIC8vIOWIm+W7uuWVhuWfjg0KICAgIGNyZWF0ZSgpIHsNCiAgICAgIHRoaXMuJHJlZnNbImNyZWF0ZSJdLm9wZW4oKTsNCiAgICB9LA0KDQogICAgLy8g57yW6L6R5ZWG5Z+ODQogICAgdXBkYXRlKHByb2plY3QpIHsNCiAgICAgIHRoaXMuc2V0UHJvamVjdChwcm9qZWN0KTsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogIm1hbGwiIH0pOw0KICAgIH0sDQoNCiAgICAvLyDliKDpmaTllYbln44NCiAgICBkZWwoaWQpIHsNCiAgICAgIHRoaXMuJGNvbmZpcm0oIuWIoOmZpOWVhuWfjuWQjuWwhuS4jeWPr+aBouWkjSwg5piv5ZCm57un57utPyIsICLliKDpmaTllYbln44iLCB7DQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsDQogICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwNCiAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICBkZWxQcm9qZWN0KHsgaWQgfSkudGhlbigoKSA9PiB7DQogICAgICAgICAgdGhpcy5nZXRNYWxsTGlzdCgpOw0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICAvLyDpgIDlh7oNCiAgICBvbkxvZ291dCgpIHsNCiAgICAgIHRoaXMuJGNvbmZpcm0oIuaYr+WQpuehruWumumAgOWHuuW5s+WPsD8iLCAi6YCA5Ye6Iiwgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLA0KICAgICAgICB0eXBlOiAid2FybmluZyIsDQogICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgdGhpcy5sb2dvdXQoKTsNCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAibG9naW4iIH0pOw0KICAgICAgfSk7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["managet.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"managet.vue","sourceRoot":"src/pages","sourcesContent":["<!--\r\n * @Description: 商城管理\r\n * @Autor: WangYuan\r\n * @Date: 2021-06-10 15:46:39\r\n * @LastEditors: WangYuan\r\n * @LastEditTime: 2022-04-25 16:26:18\r\n-->\r\n<template>\r\n  <div class=\"manage\">\r\n    <!-- 头部菜单 -->\r\n    <div class=\"manage-head\">\r\n      <div class=\"manage-head-content\">\r\n        <git-control />\r\n        <el-button size=\"small f-white bg-theme\" @click=\"create\"\r\n          >立即创建</el-button\r\n        >\r\n        <el-button size=\"small\" @click=\"onLogout\">退出</el-button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 内容 -->\r\n    <div v-for=\"(type, index) in list\" :key=\"index\" class=\"manage-body\">\r\n      <h2 class=\"manage-body-title\">\r\n        {{ type.title }}\r\n        <span>{{ type.subTitle }}</span>\r\n      </h2>\r\n\r\n      <ul v-if=\"type.list.length\" class=\"list\">\r\n        <li class=\"list-item\" v-for=\"item in type.list\" :key=\"item.id\">\r\n          <div class=\"list-item-content\">\r\n            <img :src=\"item.logo\" class=\"w50 mt10 radius\" />\r\n            <div class=\"mt25 f20\">{{ item.name }}</div>\r\n            <div class=\"list-item-content-type\">{{ type.title }}</div>\r\n            <div class=\"list-item-content-btn\">\r\n              <span @click=\"update(item)\">修改</span>\r\n              <span @click.stop=\"del(item.id)\">删除</span>\r\n            </div>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n\r\n      <!-- 空列表 -->\r\n      <el-empty v-else class=\"mt80\">\r\n        <template slot=\"description\">\r\n          <span class=\"f13 f-grey\">{{ `快去创建${type.title}吧` }}</span>\r\n        </template>\r\n      </el-empty>\r\n    </div>\r\n    <div\r\n      v-if=\"list.length == 0\"\r\n      class=\"manage-loading\"\r\n      v-loading=\"loading\"\r\n    ></div>\r\n\r\n    <!-- 页尾 -->\r\n    <div class=\"footer\"></div>\r\n\r\n    <create-dialog ref=\"create\"></create-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapMutations } from \"vuex\";\r\nimport { getProjectList, delProject } from \"@/api/project\";\r\nimport { mallTypeList } from \"@/config/mall\";\r\nimport CreateDialog from \"@/components/CreateDialog\";\r\n\r\nexport default {\r\n  name: \"mall-managet\",\r\n\r\n  components: {\r\n    CreateDialog,\r\n  },\r\n\r\n  created() {\r\n    this.dropProject();\r\n    this.getMallList();\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      show: false,\r\n      loading: false,\r\n      form: {},\r\n      list: [],\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"project\", \"userInfo\"]),\r\n  },\r\n\r\n  watch: {\r\n    show: {\r\n      immediate: true,\r\n      handler() {\r\n        if (!this.show) this.form = {};\r\n      },\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    ...mapMutations([\"dropProject\", \"setProject\", \"logout\"]),\r\n\r\n    // 获取商城列表\r\n    async getMallList() {\r\n      let map = new Map();\r\n      let temp = mallTypeList;\r\n      mallTypeList.map((item) => {\r\n        item.list = [];\r\n        map.set(item.type, item.list);\r\n      });\r\n\r\n      this.loading = true;\r\n      let { list } = await getProjectList({ userId: this.userInfo.userId });\r\n      list.map((item) => {\r\n        let value = map.get(item.type);\r\n        value.push(item);\r\n      });\r\n\r\n      this.list = temp;\r\n      this.loading = false;\r\n    },\r\n\r\n    // 创建商城\r\n    create() {\r\n      this.$refs[\"create\"].open();\r\n    },\r\n\r\n    // 编辑商城\r\n    update(project) {\r\n      this.setProject(project);\r\n      this.$router.push({ name: \"mall\" });\r\n    },\r\n\r\n    // 删除商城\r\n    del(id) {\r\n      this.$confirm(\"删除商城后将不可恢复, 是否继续?\", \"删除商城\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      }).then(() => {\r\n        delProject({ id }).then(() => {\r\n          this.getMallList();\r\n        });\r\n      });\r\n    },\r\n\r\n    // 退出\r\n    onLogout() {\r\n      this.$confirm(\"是否确定退出平台?\", \"退出\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      }).then(() => {\r\n        this.logout();\r\n        this.$router.push({ name: \"login\" });\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.manage {\r\n  position: relative;\r\n  // 隐藏滚动条\r\n  &::-webkit-scrollbar {\r\n    display: none; /* Chrome Safari */\r\n  }\r\n\r\n  .manage-head {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    height: 50px;\r\n    width: 100%;\r\n    background: #fff;\r\n    box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.1);\r\n    z-index: 10;\r\n\r\n    .manage-head-content {\r\n      display: flex;\r\n      justify-content: flex-end;\r\n      align-items: center;\r\n      width: 970px;\r\n      height: 100%;\r\n      margin: 0 auto;\r\n      line-height: 50px;\r\n      text-align: right;\r\n    }\r\n  }\r\n\r\n  .manage-body {\r\n    width: 1000px;\r\n    margin: 100px auto;\r\n\r\n    .manage-body-title {\r\n      font-size: 18px;\r\n      color: #1b1c26;\r\n      margin-bottom: 20px;\r\n      padding: 0 15px;\r\n      font-weight: 700;\r\n\r\n      span {\r\n        color: #ced1d6;\r\n      }\r\n    }\r\n\r\n    .list {\r\n      display: flex;\r\n      flex-wrap: wrap;\r\n\r\n      .list-item {\r\n        height: 300px;\r\n\r\n        .list-item-content {\r\n          position: relative;\r\n          display: flex;\r\n          flex-direction: column;\r\n          align-items: center;\r\n          width: 220px;\r\n          margin: 10px 15px 50px;\r\n          padding-top: 20px;\r\n          border-radius: 10px;\r\n          background-image: linear-gradient(-50deg, #edf1f7, #ebedf4);\r\n          box-shadow: 0 5px 10px 0 rgba(2, 31, 65, 0.05);\r\n          cursor: pointer;\r\n          transition: all 0.2s;\r\n\r\n          &:hover {\r\n            box-shadow: 0 20px 40px 0 rgba(15, 48, 85, 0.1);\r\n            margin-top: 5px;\r\n          }\r\n\r\n          .list-item-content-type {\r\n            position: relative;\r\n            margin-top: 15px;\r\n            font-size: 14px;\r\n            color: #61616a;\r\n            line-height: 24px;\r\n\r\n            &::after {\r\n              content: \"\";\r\n              position: absolute;\r\n              top: 50%;\r\n              right: -50px;\r\n              width: 35px;\r\n              height: 1px;\r\n              background-color: #e1e0e6;\r\n            }\r\n\r\n            &::before {\r\n              content: \"\";\r\n              position: absolute;\r\n              top: 50%;\r\n              left: -50px;\r\n              width: 35px;\r\n              height: 1px;\r\n              background-color: #e1e0e6;\r\n            }\r\n          }\r\n\r\n          .list-item-content-btn {\r\n            margin: 50px auto 25px;\r\n            width: 180px;\r\n            height: 40px;\r\n            line-height: 40px;\r\n            border-radius: 100px;\r\n            background-color: hsla(0, 0%, 100%, 0.4);\r\n\r\n            span {\r\n              display: inline-block;\r\n              width: 50%;\r\n              height: 100%;\r\n              font-size: 12px;\r\n              color: #61616a;\r\n              text-align: center;\r\n              cursor: pointer;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .manage-loading {\r\n    position: fixed;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n  }\r\n  .footer {\r\n    height: 200px;\r\n    width: 100%;\r\n  }\r\n}\r\n</style>"]}]}