{"remainingRequest":"D:\\开源项目\\Tooy-LowCode\\lowCode\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\开源项目\\Tooy-LowCode\\lowCode\\src\\custom-schema-template\\components\\SchemaGoods\\GoodsConfigChoose.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\开源项目\\Tooy-LowCode\\lowCode\\src\\custom-schema-template\\components\\SchemaGoods\\GoodsConfigChoose.vue","mtime":1693619752171},{"path":"D:\\开源项目\\Tooy-LowCode\\lowCode\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693619820390},{"path":"D:\\开源项目\\Tooy-LowCode\\lowCode\\node_modules\\babel-loader\\lib\\index.js","mtime":1693619820336},{"path":"D:\\开源项目\\Tooy-LowCode\\lowCode\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693619820390},{"path":"D:\\开源项目\\Tooy-LowCode\\lowCode\\node_modules\\vue-loader\\lib\\index.js","mtime":1693619864566}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7DQppbXBvcnQgeyBnZXRHb29kc0xpc3QgfSBmcm9tICJAL2FwaS9nb29kcyI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkdvb2RzQ29uZmlnQ2hvb3NlIiwNCiAgcHJvcHM6IHsNCiAgICBzaG93OiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogZmFsc2UsDQogICAgfSwNCiAgICB2YWx1ZTogew0KICAgICAgdHlwZTogQXJyYXksDQogICAgICBkZWZhdWx0OiAoKSA9PiBbXSwNCiAgICB9LA0KICB9LA0KDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5nZXRMaXN0KCk7DQogIH0sDQoNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdmlzaWJsZTogZmFsc2UsDQogICAgICBzZWxlY3RMaXN0OiBbXSwNCiAgICAgIGxpc3Q6IFtdLA0KICAgIH07DQogIH0sDQoNCiAgY29tcHV0ZWQ6IHsNCiAgICAuLi5tYXBHZXR0ZXJzKFsicHJvamVjdCJdKSwNCiAgfSwNCg0KICB3YXRjaDogew0KICAgIHNob3c6IHsNCiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwNCiAgICAgIGhhbmRsZXIobmV3VmFsdWUsIG9sZFZhbHVlKSB7DQogICAgICAgIHRoaXMudmlzaWJsZSA9IHRoaXMuc2hvdzsNCiAgICAgIH0sDQogICAgfSwNCiAgICB2aXNpYmxlOiB7DQogICAgICBpbW1lZGlhdGU6IHRydWUsDQogICAgICBoYW5kbGVyKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgew0KICAgICAgICB0aGlzLiRlbWl0KCJ1cGRhdGU6c2hvdyIsIG5ld1ZhbHVlKTsNCiAgICAgIH0sDQogICAgfSwNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgLy8g6I635Y+W5ZWG5Z+O5ZWG5ZOB5YiX6KGoDQogICAgYXN5bmMgZ2V0TGlzdCgpIHsNCiAgICAgIGxldCB7IHN0YXR1cywgbGlzdCB9ID0gYXdhaXQgZ2V0R29vZHNMaXN0KHsgcHJvamVjdElkOiB0aGlzLnByb2plY3QuaWQgfSk7DQoNCiAgICAgIGlmIChzdGF0dXMgPT0gIjEwMDAwIikgew0KICAgICAgICAvLyDnrZvpgInlrZfmrrUNCiAgICAgICAgdGhpcy5saXN0ID0gbGlzdDsNCg0KICAgICAgICAvLyDmoLnmja7pgInkuK3liJfooahpZO+8jOetm+mAieWMuemFjeWvueW6lOaVsOe7hO+8jOeUqOS6juWLvumAieWbnuaYvg0KICAgICAgICB0aGlzLnNlbGVjdExpc3QgPSB0aGlzLmxpc3QuZmlsdGVyKChpdGVtKSA9PiB7DQogICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUuaW5jbHVkZXMoaXRlbS5pZCk7DQogICAgICAgIH0pOw0KDQogICAgICAgIC8vIOWLvumAieWbnuaYvuWbnuiwg+aWueazlQ0KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICB0aGlzLnRvZ2dsZVNlbGVjdGlvbih0aGlzLnNlbGVjdExpc3QpOw0KICAgICAgICB9LCAwKTsNCiAgICAgIH0NCiAgICB9LA0KDQogICAgLy8g5Yu+6YCJ5Zue5pi+DQogICAgdG9nZ2xlU2VsZWN0aW9uKHJvd3MpIHsNCiAgICAgIGlmIChyb3dzKSB7DQogICAgICAgIHJvd3MuZm9yRWFjaCgocm93KSA9PiB7DQogICAgICAgICAgdGhpcy4kcmVmcy5tdWx0aXBsZVRhYmxlLnRvZ2dsZVJvd1NlbGVjdGlvbihyb3cpOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KDQogICAgLy8g5Yu+6YCJ6YCJ5LitDQogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHZhbCkgew0KICAgICAgdGhpcy5zZWxlY3RMaXN0ID0gdmFsOw0KICAgIH0sDQoNCiAgICAvLyDmj5DkuqQNCiAgICBzdWJtaXQoKSB7DQogICAgICB0aGlzLiRlbWl0KA0KICAgICAgICAic3VibWl0IiwNCiAgICAgICAgdGhpcy5zZWxlY3RMaXN0Lm1hcCgoaXRlbSkgPT4gaXRlbS5pZCkNCiAgICAgICk7DQogICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["GoodsConfigChoose.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"GoodsConfigChoose.vue","sourceRoot":"src/custom-schema-template/components/SchemaGoods","sourcesContent":["<!--\r\n * @Description: What's this for\r\n * @Autor: WangYuan\r\n * @Date: 2021-06-24 10:29:52\r\n * @LastEditors: WangYuan\r\n * @LastEditTime: 2021-10-08 16:05:41\r\n-->\r\n<template>\r\n  <el-dialog\r\n    title=\"选择商品\"\r\n    :visible.sync=\"visible\"\r\n    :close-on-click-modal='false'\r\n    :append-to-body='true'\r\n    width=\"45%\"\r\n  >\r\n    <el-table\r\n      ref=\"multipleTable\"\r\n      :data=\"list\"\r\n      tooltip-effect=\"dark\"\r\n      style=\"width: 100%\"\r\n      max-height=\"300\"\r\n      @selection-change=\"handleSelectionChange\"\r\n    >\r\n      <el-table-column\r\n        type=\"selection\"\r\n        align='center'\r\n        header-align='center'\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"name\"\r\n        label=\"商品名\"\r\n        align='center'\r\n        header-align='center'\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"商品封面\"\r\n        align='center'\r\n        header-align='center'\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <img\r\n            class=\"w50 h50\"\r\n            :src=\"scope.row.cover\"\r\n          >\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"price\"\r\n        label=\"价格（元）\"\r\n        align='center'\r\n        header-align='center'\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"originalPrice\"\r\n        label=\"原价（元）\"\r\n        align='center'\r\n        header-align='center'\r\n      >\r\n      </el-table-column>\r\n    </el-table>\r\n    <span\r\n      slot=\"footer\"\r\n      class=\"dialog-footer\"\r\n    >\r\n      <el-button @click=\"visible = false\">取 消</el-button>\r\n      <el-button\r\n        type=\"primary\"\r\n        @click=\"submit\"\r\n      >确 定</el-button>\r\n    </span>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport { getGoodsList } from \"@/api/goods\";\r\n\r\nexport default {\r\n  name: \"GoodsConfigChoose\",\r\n  props: {\r\n    show: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    value: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n  },\r\n\r\n  created() {\r\n    this.getList();\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      visible: false,\r\n      selectList: [],\r\n      list: [],\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"project\"]),\r\n  },\r\n\r\n  watch: {\r\n    show: {\r\n      immediate: true,\r\n      handler(newValue, oldValue) {\r\n        this.visible = this.show;\r\n      },\r\n    },\r\n    visible: {\r\n      immediate: true,\r\n      handler(newValue, oldValue) {\r\n        this.$emit(\"update:show\", newValue);\r\n      },\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    // 获取商城商品列表\r\n    async getList() {\r\n      let { status, list } = await getGoodsList({ projectId: this.project.id });\r\n\r\n      if (status == \"10000\") {\r\n        // 筛选字段\r\n        this.list = list;\r\n\r\n        // 根据选中列表id，筛选匹配对应数组，用于勾选回显\r\n        this.selectList = this.list.filter((item) => {\r\n          return this.value.includes(item.id);\r\n        });\r\n\r\n        // 勾选回显回调方法\r\n        setTimeout(() => {\r\n          this.toggleSelection(this.selectList);\r\n        }, 0);\r\n      }\r\n    },\r\n\r\n    // 勾选回显\r\n    toggleSelection(rows) {\r\n      if (rows) {\r\n        rows.forEach((row) => {\r\n          this.$refs.multipleTable.toggleRowSelection(row);\r\n        });\r\n      }\r\n    },\r\n\r\n    // 勾选选中\r\n    handleSelectionChange(val) {\r\n      this.selectList = val;\r\n    },\r\n\r\n    // 提交\r\n    submit() {\r\n      this.$emit(\r\n        \"submit\",\r\n        this.selectList.map((item) => item.id)\r\n      );\r\n      this.visible = false;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n::v-deep .el-dialog {\r\n  .el-dialog__title {\r\n    font-size: 14px !important;\r\n    font-weight: 600;\r\n  }\r\n  .el-dialog__body {\r\n    padding: 10px 20px 30px 20px !important;\r\n  }\r\n}\r\n\r\n.wrap {\r\n  background: #f2f2f6;\r\n  height: 400px;\r\n  border-radius: 5px;\r\n}\r\n</style>"]}]}